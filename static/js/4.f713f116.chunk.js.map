{"version":3,"sources":["components/common/withAuthRedirect.js","components/Dialogs/Dialogs.module.css","components/Dialogs/Dialog/Dialog.module.css","components/Dialogs/Message/Message.module.css","components/Forms/MessageForm.module.css","components/Dialogs/Dialog/Dialog.jsx","components/Dialogs/Message/Message.jsx","components/Forms/MessageForm.jsx","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsContainer.jsx"],"names":["mapStateToProps","state","is_auth","getIsAuth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Dialog","id","dialog_avatar","dialog_name","path","className","s","dialog","activeClassName","active","src","alt","Message","message_id","author_id","message","author","own","MessageForm","sendMessage","validationSchema","Yup","new_message","max","initialValues","onSubmit","values","resetForm","error","console","send_message_form","send_message_input","component","name","type","send_message_button","Dialogs","dialogs","messages","setCurrentRoute","dialogsArray","messagesArray","dialogs_wrapper","dialog_items_wrapper","dialog_items","map","d","m","author_name","compose","getDialogs","dispatch","sendMessageActionCreator","current_route"],"mappings":"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","file":"static/js/4.f713f116.chunk.js","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { getIsAuth } from '../../redux/selectors';\r\n\r\nlet mapStateToProps = (state) => ({\r\n\tis_auth: getIsAuth(state),\r\n})\r\nconst withAuthRedirect = (Component) => {\r\n\tclass RedirectComponent extends React.Component {\r\n\t\trender() {\r\n\t\t\tif(!this.props.is_auth) return <Redirect to=\"/login\" />\r\n\t\t\treturn(\r\n\t\t\t\t<Component {...this.props} />\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps)(RedirectComponent);\r\n}\r\n\r\nexport default withAuthRedirect;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs_wrapper\":\"Dialogs_dialogs_wrapper__2zTOg\",\"dialog_items_wrapper\":\"Dialogs_dialog_items_wrapper__1kMjr\",\"dialog_items\":\"Dialogs_dialog_items__3Rvu-\",\"messages\":\"Dialogs_messages__2iZpL\",\"new_message_wrapper\":\"Dialogs_new_message_wrapper__2Aspz\",\"new_message\":\"Dialogs_new_message__2IxTl\",\"new_message_buttons\":\"Dialogs_new_message_buttons__3TgVg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"Dialog_dialog__Hc26M\",\"active\":\"Dialog_active__96BS5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__24nBZ\",\"own\":\"Message_own__19eSK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"send_message_form\":\"MessageForm_send_message_form__2d4eW\",\"send_message_input\":\"MessageForm_send_message_input__2TLZE\",\"send_message_button\":\"MessageForm_send_message_button__NyaTO\"};","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Dialog.module.css';\r\n\r\nconst Dialog = ({id,dialog_avatar,dialog_name}) => {\r\n\tconst path = `/dialogs/${id}`;\r\n\r\n\treturn (\r\n\t\t<div className={s.dialog}>\r\n\t\t\t<NavLink to={path} activeClassName={s.active}>\r\n\t\t\t\t<img src={dialog_avatar} alt='dialog_avatar'></img>\r\n\t\t\t\t<div>{dialog_name}</div>\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Dialog;\r\n","import React from 'react';\r\nimport s from './Message.module.css';\r\n\r\n\r\nconst Message = ({message_id,author_id,message}) => {\r\n\treturn(\r\n\t\t<div id={message_id} author={author_id} className={`${s.message} ${author_id === 0&&s.own}`}>{message}</div>\r\n\t);\r\n}\r\n\r\nexport default Message;\r\n","import { ErrorMessage, Field, Form, Formik } from 'formik';\r\nimport React from 'react';\r\nimport s from './MessageForm.module.css';\r\nimport * as Yup from 'yup';\r\n\r\nconst MessageForm = ({sendMessage}) => {\r\n\tconst initialValues = {\r\n\t\tnew_message: '',\r\n\t}\r\n\r\n\tconst onSubmit = (values,{resetForm}) => {\r\n\t\ttry {\r\n\t\t\tsendMessage(values.new_message);\r\n\t\t\tresetForm({});\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t}\r\n\r\n\tconst validationSchema = Yup.object({\r\n\t\tnew_message: Yup.string().max(200, \"Your message is too long\")\r\n\t})\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={initialValues}\r\n\t\t\tvalidationSchema={validationSchema}\r\n\t\t\tonSubmit={onSubmit}\r\n\t\t>\r\n\t\t\t<Form className={s.send_message_form}>\r\n\t\t\t\t<div className={s.send_message_input}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent=\"textarea\"\r\n\t\t\t\t\t\tname=\"new_message\"\r\n\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ErrorMessage name='new_message' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type=\"submit\" className={s.send_message_button}>Send message</button>\r\n\t\t\t</Form>\r\n\t\t</Formik>\r\n\t);\r\n}\r\n\r\nexport default MessageForm;","import React from 'react';\r\nimport s from './Dialogs.module.css';\r\nimport Dialog from './Dialog/Dialog';\r\nimport Message from './Message/Message';\r\nimport MessageForm from '../Forms/MessageForm';\r\n\r\n\r\n\r\nconst Dialogs = ({dialogs:{dialogs,messages},sendMessage,setCurrentRoute}) => {\r\n\tsetCurrentRoute(\"/dialogs\");\r\n\tlet dialogsArray = [...dialogs];\r\n\tlet messagesArray = [...messages];\r\n\tconst sendNewMessage = (new_message) => {\r\n\t\t\tsendMessage(new_message);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={s.dialogs_wrapper}>\r\n\t\t\t<div className={s.dialog_items_wrapper}>\r\n\t\t\t\t<div className={s.dialog_items}>\r\n\t\t\t\t\t{dialogsArray.map(d => <Dialog key={d.id} id={d.id} dialog_name={d.dialog_name} dialog_avatar={d.dialog_avatar} />)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={s.messages}>\r\n\t\t\t\t{messagesArray.map(m => <Message key={m.message_id} message_id={m.message_id} message={m.message} author_name={m.author_name} author_id={m.author_id} />)}\r\n\t\t\t\t<MessageForm sendMessage={sendNewMessage} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Dialogs;\r\n","import { sendMessageActionCreator, setCurrentRoute } from '../../redux/actionCreators';\r\nimport Dialogs from './Dialogs';\r\nimport { connect } from 'react-redux';\r\nimport withAuthRedirect from '../common/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { getDialogs } from '../../redux/selectors';\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn ({\r\n\t\tdialogs: getDialogs(state)\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn ({\r\n\t\tsendMessage: (new_message) => dispatch(sendMessageActionCreator(new_message)),\r\n\t\tsetCurrentRoute: (current_route) => dispatch(setCurrentRoute(current_route))\r\n\t})\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps,mapDispatchToProps),\r\n\twithAuthRedirect\r\n)(Dialogs);\r\n"],"sourceRoot":""}