(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[3],{253:function(t,e,o){t.exports={profileInfo_wrapper:"ProfileInfo_profileInfo_wrapper__PT8YA",banner:"ProfileInfo_banner__2jObx",person_info:"ProfileInfo_person_info__34u4h",avatar_block:"ProfileInfo_avatar_block__1nFGo",user_name:"ProfileInfo_user_name__38mv_",looking_for_job:"ProfileInfo_looking_for_job__2IveP",description_block:"ProfileInfo_description_block__1TkpC",description_content:"ProfileInfo_description_content__2lwQJ",description_header:"ProfileInfo_description_header__iiG_L",status:"ProfileInfo_status__2Tz-H",contact:"ProfileInfo_contact__1d0hE",change_info_button:"ProfileInfo_change_info_button__2v3RH",icons_author:"ProfileInfo_icons_author__17o1k"}},254:function(t,e,o){"use strict";var a=o(2),s=o(4),n=o(5),c=o(12),i=o(13),r=o(1),l=o(0),b=o.n(l),u=o(17),j=o(11),d=o(25),p=function(t){return{is_auth:Object(d.i)(t)}};e.a=function(t){var e=function(e){Object(c.a)(l,e);var o=Object(i.a)(l);function l(){return Object(s.a)(this,l),o.apply(this,arguments)}return Object(n.a)(l,[{key:"render",value:function(){return this.props.is_auth?Object(r.jsx)(t,Object(a.a)({},this.props)):Object(r.jsx)(j.a,{to:"/login"})}}]),l}(b.a.Component);return Object(u.b)(p)(e)}},259:function(t,e,o){t.exports={profile_wrapper:"Profile_profile_wrapper__1YLEU"}},260:function(t,e,o){t.exports={new_post_form:"PostForm_new_post_form__12U9Z",new_post_input:"PostForm_new_post_input__2boj8",add_post_button:"PostForm_add_post_button__2zl-f"}},261:function(t,e,o){t.exports={posts:"MyPosts_posts__3ng4M",new_post:"MyPosts_new_post__bwkT4",new_post_content:"MyPosts_new_post_content__2WQf-"}},262:function(t,e,o){t.exports={item:"Post_item__1I4R3",post_content_wrapper:"Post_post_content_wrapper__3Z6oL",author:"Post_author__1dN6P",post_content:"Post_post_content__1rFbh",action_buttons:"Post_action_buttons__1kYno",likes:"Post_likes__34yDk",add_comment:"Post_add_comment__nNteY"}},263:function(t,e,o){"use strict";o.r(e);var a=o(2),s=o(4),n=o(5),c=o(12),i=o(13),r=o(1),l=o(0),b=o(259),u=o.n(b),j=o(17),d=o(9),p=o(29),h=o(38),f=o(260),_=o.n(f),m=function(t){var e=t.addPost,o=h.a({new_post:h.b().max(200,"Your post text is too long")});return Object(r.jsx)(p.d,{initialValues:{new_post:""},validationSchema:o,onSubmit:function(t,o){var a=o.resetForm;try{e(t.new_post),a({})}catch(s){console.error(s)}},children:Object(r.jsxs)(p.c,{className:_.a.new_post_form,children:[Object(r.jsxs)("div",{className:_.a.new_post_input,children:[Object(r.jsx)(p.b,{component:"textarea",name:"new_post"}),Object(r.jsx)(p.a,{name:"new_post"})]}),Object(r.jsx)("button",{type:"submit",className:_.a.add_post_button,children:"Add Post"})]})})},O=o(261),x=o.n(O),v=o(262),w=o.n(v),k=function(t){return Object(r.jsxs)("div",{className:w.a.item,id:t.id,children:[Object(r.jsx)("img",{src:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1",alt:"avatar"}),Object(r.jsxs)("div",{className:w.a.post_content_wrapper,children:[Object(r.jsx)("div",{className:w.a.author,children:Object(r.jsx)("a",{href:t.author_url,children:t.author})}),Object(r.jsx)("div",{className:w.a.post_content,children:t.post_content})]}),Object(r.jsxs)("div",{className:w.a.action_buttons,children:[Object(r.jsxs)("div",{className:w.a.likes,children:[t.likes_count,"\u2764"," like"]}),Object(r.jsx)("div",{className:w.a.add_comment,children:"add comment"})]})]})},g=function(t){var e=t.posts;return Object(r.jsxs)("div",{className:x.a.posts,children:[Object(r.jsx)("div",{className:x.a.new_post,children:Object(r.jsx)(m,{addPost:function(e){t.addPost(e)}})}),e.map((function(t){return Object(r.jsx)(k,{id:t.id,author:t.author,post_content:t.post_content,likes_count:t.likes_count},t.id)}))]})},P=Object(j.b)((function(t){return{posts:t.profile.posts}}),(function(t){return{addPost:function(e){var o=Object(d.a)(e);t(o)}}}))(g),y=o(7),N=o.n(y),F=o(15),I=o(33),D=o(44),A=o(253),C=o.n(A),J=o(92),M=function(t){var e=t.fullName,o=t.userId,s=t.contacts,n=t.lookingForAJob,c=t.lookingForAJobDescription,i=t.submitProfileInfoChange,l=t.error,b=t.aboutMe,u=Object(a.a)(Object(a.a)({},s),{},{lookingForAJob:n,lookingForAJobDescription:c,fullName:e,aboutMe:b}),j=h.a({}),d=l&&Object(r.jsx)("div",{className:C.a.submit_error,children:l});return Object(r.jsx)(p.d,{initialValues:u,validationSchema:j,onSubmit:function(t){var e=t.lookingForAJob,a=t.lookingForAJobDescription,s=t.fullName,n=t.facebook,c=t.github,r=t.instagram,l=t.mainLink,b=t.twitter,u=t.vk,j=t.website,d=t.youtube,p=t.aboutMe;i({userId:o,fullName:s,lookingForAJob:e,aboutMe:p,lookingForAJobDescription:a,contacts:{facebook:n,github:c,instagram:r,mainLink:l,twitter:b,vk:u,website:j,youtube:d}})},children:Object(r.jsxs)(p.c,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"fullName",children:"Your Full Name is "}),Object(r.jsx)(p.b,{type:"text",name:"fullName",placeholder:"fullName"}),Object(r.jsx)(p.a,{name:"fullName"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJobDescription",children:"Describe your skills "}),Object(r.jsx)(p.b,{component:"textarea",name:"lookingForAJobDescription",placeholder:"lookingForAJobDescription"}),Object(r.jsx)(p.a,{name:"lookingForAJobDescription"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"aboutMe",children:"Tell about yourself "}),Object(r.jsx)(p.b,{component:"textarea",name:"aboutMe",placeholder:"aboutMe"}),Object(r.jsx)(p.a,{name:"aboutMe"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"facebook",children:"Your facebook account link"}),Object(r.jsx)(p.b,{type:"text",name:"facebook",placeholder:"facebook"}),Object(r.jsx)(p.a,{name:"facebook"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"github",children:"Your github account link"}),Object(r.jsx)(p.b,{type:"text",name:"github",placeholder:"github"}),Object(r.jsx)(p.a,{name:"github"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"instagram",children:"Your instagram account link"}),Object(r.jsx)(p.b,{type:"text",name:"instagram",placeholder:"instagram"}),Object(r.jsx)(p.a,{name:"instagram"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"mainLink",children:"Your mainLink"}),Object(r.jsx)(p.b,{type:"text",name:"mainLink",placeholder:"mainLink"}),Object(r.jsx)(p.a,{name:"mainLink"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"twitter",children:"Your twitter account link"}),Object(r.jsx)(p.b,{type:"text",name:"twitter",placeholder:"twitter"}),Object(r.jsx)(p.a,{name:"twitter"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"vk",children:"Your vk account link"}),Object(r.jsx)(p.b,{type:"text",name:"vk",placeholder:"vk"}),Object(r.jsx)(p.a,{name:"vk"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"website",children:"Your website"}),Object(r.jsx)(p.b,{type:"text",name:"website",placeholder:"website"}),Object(r.jsx)(p.a,{name:"website"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"youtube",children:"Your youtube account link"}),Object(r.jsx)(p.b,{type:"text",name:"youtube",placeholder:"youtube"}),Object(r.jsx)(p.a,{name:"youtube"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJob",children:"I'm looking for a job "}),Object(r.jsx)(p.b,{type:"checkbox",name:"lookingForAJob"})]}),d,Object(r.jsx)("button",{type:"submit",children:"Submit"})]})})},S=function(t){var e=t.statusText,o=t.ownProfile,a=t.updateStatus,s=Object(l.useState)(e),n=Object(I.a)(s,2),c=n[0],i=n[1],b=Object(l.useState)(!1),u=Object(I.a)(b,2),j=u[0],d=u[1];""===c&&o&&i("Double-click here to add status"),Object(l.useEffect)((function(){i(e)}),[e]);var p=function(){d(!j)};return o?j?Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{"data-testid":"statusChangeInput",type:"text",autoFocus:!0,onChange:function(t){i(t.target.value)},value:c}),Object(r.jsx)("button",{"data-testid":"saveStatusButton",onClick:function(){p(),a(c)},children:"Save Changes"})]}):Object(r.jsx)("div",{"data-testid":"ownStatusText",onDoubleClick:p,className:C.a.status,children:e},"status"):Object(r.jsx)("div",{"data-testid":"statusText",children:c},"status")},Y=function(t){var e=t.fullName,o=t.is_looking,a=t.avatar,s=t.ownProfile,n=t.onPhotoUpload,c=t.status,i=t.updateStatus,l=t.contacts,b=t.setEditMode,u=t.lookingForAJobDescription,j=t.aboutMe,d=t.serverErrorMessage;return console.log(l),Object(r.jsxs)("div",{className:C.a.profileInfo_wrapper,children:[Object(r.jsx)("div",{className:C.a.banner,children:Object(r.jsx)("img",{src:"https://source.unsplash.com/1000x200/?city",alt:"newyear"})}),Object(r.jsxs)("div",{className:C.a.person_info,children:[Object(r.jsxs)("div",{className:C.a.avatar_block,children:[Object(r.jsxs)("div",{className:C.a.user_name,children:[e," ",o]}),a,s&&Object(r.jsx)("input",{type:"file",onChange:n})]}),Object(r.jsxs)("div",{className:C.a.description_block,children:[Object(r.jsx)("h3",{className:C.a.description_header,children:"Status: "}),Object(r.jsx)(S,{statusText:c,ownProfile:s,updateStatus:i,serverErrorMessage:d}),Object(r.jsx)("h3",{className:C.a.description_header,children:"About me: "}),Object(r.jsx)("div",{className:C.a.description_content,children:j}),Object(r.jsx)("h3",{className:C.a.description_header,children:"My Skills:"}),Object(r.jsx)("div",{className:C.a.description_content,children:u}),Object(r.jsx)("h3",{className:C.a.description_header,children:"Contacts:"}),l,s&&Object(r.jsx)("button",{onClick:function(){return b(!0)},className:C.a.change_info_button,children:"Change Your Info"}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/dave-gandy",title:"Dave Gandy",children:"Dave Gandy"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons",children:"Smashicons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/prettycons",title:"prettycons",children:"prettycons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect",children:"Pixel perfect"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})]})]})},L=o(19),T=function(t){var e=t.current_visited_user,o=t.isFetching,a=t.status,s=t.updateStatus,n=t.user_id,c=t.savePhoto,i=t.ownProfile,b=t.icons,u=Object(l.useState)(!1),p=Object(I.a)(u,2),h=p[0],f=p[1],_=Object(l.useState)(null),m=Object(I.a)(_,2),O=m[0],x=m[1],v=Object(j.c)();if(o)return Object(r.jsx)(D.a,{});if(!e)return Object(r.jsx)(D.a,{});var w=e.lookingForAJob?Object(r.jsx)("span",{className:C.a.looking_for_job,children:"\ud83e\udd11"}):Object(r.jsx)("span",{className:C.a.looking_for_job,children:"\ud83e\udd20"}),k=[];for(var g in e.contacts)e.contacts[g]&&k.push(Object(r.jsx)("a",{className:C.a.contact,href:e.contacts[g],children:Object(r.jsx)("img",{className:C.a.contact_icon,src:b["".concat(g,"Icon")],alt:g,title:g})},g));var P=e.photos.large?Object(r.jsx)("img",{src:e.photos.large,alt:"avatar"}):Object(r.jsx)("img",{src:J.a,alt:"avatar"}),y=function(){var t=Object(F.a)(N.a.mark((function t(e){var o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.b.setProfileInfo(e);case 2:o=t.sent,console.log(o),0===o.data.resultCode?(v(Object(d.k)(e)),f(!1)):o.data.messages.length&&x(o.data.messages[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return h?Object(r.jsx)(M,{userId:e.userId,fullName:e.fullName,contacts:e.contacts,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,submitProfileInfoChange:y,error:O,aboutMe:e.aboutMe}):Object(r.jsx)(Y,{fullName:e.fullName,is_looking:w,avatar:P,ownProfile:i,onPhotoUpload:function(t){t.target.files.length?c(t.target.files[0],n):console.log("No file loaded")},status:a,updateStatus:s,contacts:k,setEditMode:f,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe})},U=function(t){return t.ownProfile?Object(r.jsxs)("main",{className:u.a.profile_wrapper,children:[Object(r.jsx)(T,Object(a.a)({},t)),Object(r.jsx)(P,{})]}):Object(r.jsx)("main",{className:u.a.profile_wrapper,children:Object(r.jsx)(T,Object(a.a)({},t))})},E=o(28),R=(o(254),o(27)),G=o(25),z=o.p+"static/media/008-facebook.29ee2ba2.svg",H=o.p+"static/media/006-web-page.d33a2867.svg",Q=o.p+"static/media/005-vk.e9553eae.svg",V=o.p+"static/media/003-twitter.88d497cc.svg",Z=o.p+"static/media/001-instagram.02967a62.svg",q=o.p+"static/media/002-youtube.5213846a.svg",B=o.p+"static/media/007-github-logo.d1bb13ce.svg",W=o.p+"static/media/004-network.1a646e33.svg",K=o(11),X=function(t){Object(c.a)(o,t);var e=Object(i.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(t=e.call.apply(e,[this].concat(n))).icons={facebookIcon:z,websiteIcon:H,vkIcon:Q,twitterIcon:V,instagramIcon:Z,youtubeIcon:q,githubIcon:B,mainLinkIcon:W},t}return Object(n.a)(o,[{key:"componentDidMount",value:function(){this.initProfile()}},{key:"shouldComponentUpdate",value:function(t,e){return t.match.params.userId!==this.props.match.params.userId||t.status!==this.props.status||t.user_id!==this.props.user_id||t.current_visited_user!==this.props.current_visited_user||t.is_auth!==this.props.is_auth}},{key:"componentDidUpdate",value:function(t,e,o){this.initProfile()}},{key:"initProfile",value:function(){var t=this.props.match.params.userId;if(t){if(this.ownProfile=!1,this.props.current_route==="/profile/".concat(t))return;this.props.setCurrentRoute("/profile/".concat(t)),this.props.getUserData(t)}else"/profile"!==this.props.current_route&&this.props.setCurrentRoute("/profile"),this.ownProfile||this.props.getUserData(this.props.user_id),this.ownProfile=!0}},{key:"render",value:function(){return this.ownProfile&&!this.props.is_auth?Object(r.jsx)(K.a,{to:"/login"}):Object(r.jsx)(U,Object(a.a)(Object(a.a)({},this.props),{},{ownProfile:this.ownProfile,icons:this.icons}))}}]),o}(l.Component);e.default=Object(R.d)(Object(j.b)((function(t){return{current_visited_user:Object(G.f)(t),is_fetching:Object(G.j)(t),status:Object(G.g)(t),user_id:Object(G.d)(t),current_route:Object(G.b)(t),is_auth:Object(G.i)(t)}}),{getUserData:E.d,updateStatus:E.k,setCurrentRoute:d.g,getCurrentRoute:G.b,savePhoto:E.g,getAuthData:E.b}))(X)}}]);
//# sourceMappingURL=3.9aaa18f5.chunk.js.map