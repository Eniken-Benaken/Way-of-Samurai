{"version":3,"sources":["components/News/News.module.css","components/Users/Users.module.css","api/API.ts","components/Sidebar/Sidebar.module.css","redux/selectors.ts","redux/reducers/news_reducer.ts","redux/reducers/sidebar_reducer.ts","components/common/object-helpers.ts","redux/reducers/users_reducer.ts","redux/redux_store.ts","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","components/Music/Track/Track.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/Sidebar/Friend/Friend.jsx","components/Sidebar/Menu_items/MenuItem.jsx","components/Sidebar/Sidebar.tsx","components/Sidebar/SidebarContainer.tsx","components/News/NewsPost/NewsPost.tsx","components/News/News.tsx","components/News/NewsContainer.tsx","components/Users/User/User.tsx","components/common/Paginator.tsx","components/Users/Users.tsx","components/Users/UsersContainer.tsx","components/Forms/LoginForm.tsx","components/Login/LoginPage.tsx","components/common/withSuspense.jsx","App.tsx","index.js","redux/reducers/auth_reducer.ts","components/Settings/Settings.module.css","components/News/NewsPost/NewsPost.module.css","components/Users/User/User.module.css","assets/images/preloader.svg","components/common/Preloader.tsx","components/Login/LoginPage.module.css","components/Music/Track/Track.module.css","components/common/Paginator.module.css","redux/reducers/app_reducer.ts","components/Header/Header.module.css","components/Music/Music.module.css","redux/reducers/profile_reducer.ts","redux/reducers/dialogs_reducer.ts","assets/images/avatar.png"],"names":["module","exports","a","axios","create","baseURL","withCredentials","headers","usersAPI","getUsers","pageNumber","page_size","get","response","console","log","data","error","followUser","userId","post","unfollowUser","delete","profileAPI","getUserData","getStatus","setStatus","status","put","setProfilePhoto","photo","formData","FormData","append","setProfileInfo","changed_info","authAPI","getAuthData","sendLoginData","email","password","rememberMe","captcha","signOut","securityAPI","getCaptchaUrl","url","getIsAuth","state","auth","is_auth","getSubmitError","submit_error","getSubmitErrorCode","submit_error_code","getCurrentRoute","app","current_route","getCurrentUserLogin","login","getCurrentUserEmail","getCurrentUserId","id","captcha_url","getCurrentVisitedUserData","profile","current_visited_user","getCurrentVisitedUserstatus","getIsFetchingProfileData","is_fetching","getIsPhotoUploaded","photoUploaded","getDialogs","dialogs","getPosts","posts","getFriendsBarItems","sidebar","friends","getSideMenuItems","menu_items","initial_state","news_posts","author","author_url","post_content","likes_count","news_reducer","friend_avatar","friend_name","icon","item","path","sidebar_reducer","updateObjectInArray","items","itemId","objPropName","newObjProps","map","FOLLOW_USER","UNFOLLOW_USER","SET_USERS","SET_CURRENT_USERS_PAGE","TOGGLE_FOLLOWING","followUserAC","user_id","type","unfollowUserAC","setCurrentUsersPage","active_page","toggleFollowing","_followUnfollowFlow","dispatch","AC","APImethod","resultCode","users","total_users_count","is_following","portion_size","users_reducer","action","followed","filter","root_reducer","combineReducers","profile_reducer","dialogs_reducer","news","auth_reducer","app_reducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","Header","signed","onClick","to","className","s","header","src","alt","loginBlock","HeaderContainer","this","props","Component","connect","Track","track","cover","track_name","track_duration","Music","music_wrapper","music_header","Settings","settings_wrapper","settings_header","person_info","name","value","login_info","phone_number","action_buttons","Friend","friend","href","MenuItem","menu_item","exact","activeClassName","active","menu_item_icon","menu_item_item","Sidebar","sidebar_wrapper","menu","render","friends_bar","friends_header","friends_block","SidebarContainer","NewsPost","post_content_wrapper","likes","add_comment","News","NewsContainer","User","user_name","user_avatar","user_status_message","is_followed","button","disabled","unfollowThisUser","followThisUser","avatar_follow","avatar","user_info_wrapper","user_info","Paginator","total_items_count","set_active_page","pagesCount","Math","ceil","pages","i","push","portionsCount","useState","portionNumber","setPortionNumber","leftPortionNumber","rightPortionNumber","useEffect","portionNumberToDisplay","pagesItems","p","page","pagination","Users","u","is_follow","photos","small","UsersContainer","onPageChange","Preloader","LoginForm","submitLogin","captchaUrl","validationSchema","Yup","min","max","required","validationSchemaWithCaptcha","serverErrorMessage","placeholder","initialValues","onSubmit","values","htmlFor","error_code","getCaptcha","setCaptcha","login_form","withSuspense","Suspense","fallback","DialogsContainer","React","lazy","ProfileContainer","App","init_app","initialized","component","withRouter","ReactDOM","StrictMode","document","getElementById","SET_AUTH_DATA","SET_IS_AUTH","STOP_SUBMIT","SET_CAPTCHA_URL","setAuthData","setIsAuth","getCaptchaUrlSuccess","messages","checking_auth","preloader","style","width","INIT_APP","SET_CURRENT_ROUTE","setCurrentRoute","ADD_POST","DELETE_POST","SET_STATUS","TOGGLE_IS_FETCHING","TOGGLE_IS_PHOTO_UPLOADED","SET_USER_PROFILE","addPostAC","new_post","toggleIsFetching","Date","getSeconds","toggleIsPhotoUploaded","isFetching","updateStatus","savePhoto","author_name","author_id","length","postId","SEND_MESSAGE","sendMessage","new_message","dialog_name","dialog_avatar","message_id","message","newMessageState"],"mappings":"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","file":"static/js/main.a1170695.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"News_posts__3V4HP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3-FMn\",\"pagination\":\"Users_pagination__2OmqP\",\"page\":\"Users_page__2Unf2\",\"active_page\":\"Users_active_page__An9pd\"};","import axios from \"axios\";\r\nimport { currentVisitedUserType } from \"../redux/reducers/profile_reducer\";\r\nimport { userType } from \"../redux/reducers/users_reducer\";\r\nconst a = axios.create({\r\n\tbaseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t\"API-KEY\": \"5b4d3778-fd4c-41ab-b731-1b26cfea860b\"\r\n\t},\r\n})\r\n//\thttps://social-network.samuraijs.com/api/1.0/profile/status/14327\r\n\r\n\r\ntype generalRT = {\r\n\tdata: {\r\n\t\tresultCode: number\r\n\t\tmessages: string[],\r\n\t\tdata: object\r\n\t}\r\n}\r\n\r\n\r\ntype getUsersRT = {\r\n\tdata: {\r\n\t\titems: userType[],\r\n\t\ttotalCount: number,\r\n\t\terror: string\r\n\t}\r\n}\r\n\r\nexport type followRT = generalRT;\r\n\r\n\r\nexport const usersAPI = {\r\n\tasync getUsers(pageNumber = 1, page_size = 50) {\r\n\t\ttry {\r\n\t\t\tconst response: getUsersRT = await a.get(`users?page=${pageNumber}&count=${page_size}`)\r\n\t\t\tconsole.log(response);\r\n\t\t\treturn response.data;\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t},\r\n\tasync followUser(userId: number) {\r\n\t\tconst response: followRT = await a.post(`follow/${userId}`)\r\n\t\treturn response;\r\n\t},\r\n\tasync unfollowUser(userId: number) {\r\n\t\tconst response: followRT = await a.delete(`follow/${userId}`)\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype setProfileInfoRT = generalRT;\r\ntype setProfilePhotoRT = generalRT;\r\ntype setStatusRT = generalRT;\r\ntype getStatusRT = {\r\n\tdata: string\r\n}\r\n\r\n\r\nexport const profileAPI = {\r\n\tasync getUserData(userId: number | null) {\r\n\t\ttry {\r\n\t\t\tconst response = await a.get(`profile/${userId}`)\r\n\t\t\treturn response.data\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t},\r\n\tasync getStatus(userId: number | null) {\r\n\t\tconst response: getStatusRT = await a.get(`profile/status/${userId}`)\r\n\t\treturn response;\r\n\t},\r\n\tasync setStatus(status: string) {\r\n\t\tconst response: setStatusRT = await a.put(`profile/status`, { status: status })\r\n\t\treturn response\r\n\t},\r\n\tasync setProfilePhoto(photo: any) {\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('image', photo);\r\n\t\tconst response: setProfilePhotoRT = await a.put(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn response;\r\n\t},\r\n\tasync setProfileInfo(changed_info: currentVisitedUserType) {\r\n\t\tconst response: setProfileInfoRT = await a.put(`profile`, changed_info);\r\n\t\treturn response\r\n\t},\r\n}\r\n\r\n\r\n\r\n\r\nexport type getAuthDataRT = {//RT means Return Type\r\n\tdata: {\r\n\t\tdata: {\r\n\t\t\tid: number | null,\r\n\t\t\temail: string | null,\r\n\t\t\tlogin: string | null\r\n\t\t}\r\n\t\tresultCode: number\r\n\t\tmessages: string[]\r\n\t}\r\n}\r\n\r\ntype LoginRT = {\r\n\tdata: {\r\n\t\tresultCode: number\r\n\t\tmessages: string[],\r\n\t\tdata: {\r\n\t\t\tuserId: number\r\n\t\t}\r\n\t}\r\n}\r\n\r\ntype LogoutRT = generalRT;\r\n\r\n\r\nexport const authAPI = {\r\n\tasync getAuthData() {\r\n\t\ttry {\r\n\t\t\tconst response: getAuthDataRT = await a.get(`auth/me`)\r\n\t\t\treturn response\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t},\r\n\tasync sendLoginData(email: string, password: string, rememberMe: boolean, captcha: string | null) {\r\n\t\ttry {\r\n\t\t\tconst response: LoginRT = await a.post(`auth/login`, { email, password, rememberMe, captcha })\r\n\t\t\tconsole.log(response);\r\n\t\t\treturn response\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t},\r\n\tasync signOut() {\r\n\t\ttry {\r\n\t\t\tconst response: LogoutRT = await a.delete(`auth/login`)\r\n\t\t\tconsole.log(response);\r\n\t\t\treturn response\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\ntype getCaptchaRT = {//RT means Return Type\r\n\tdata: {\r\n\t\turl: string\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tasync getCaptchaUrl() {\r\n\t\tconst response: getCaptchaRT = await a.get(`security/get-captcha-url`)\r\n\t\treturn response.data.url;\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_wrapper\":\"Sidebar_sidebar_wrapper__3bqJp\",\"menu\":\"Sidebar_menu__oKIKk\",\"menu_item\":\"Sidebar_menu_item__2pcG6\",\"active\":\"Sidebar_active__3_vA7\",\"menu_item_icon\":\"Sidebar_menu_item_icon__1SAAl\",\"friends_bar\":\"Sidebar_friends_bar__2DiYk\",\"friends_header\":\"Sidebar_friends_header__125Qt\",\"friends_block\":\"Sidebar_friends_block__385Hh\",\"friend\":\"Sidebar_friend__3bzw9\",\"friend_avatar\":\"Sidebar_friend_avatar__2xHms\",\"friend_name\":\"Sidebar_friend_name__1i7aI\"};","import {AppStateType} from './redux_store';\r\nexport const getIsAuth = (state: AppStateType) => {\r\n\treturn state.auth.is_auth\r\n}\r\n\r\nexport const getSubmitError = (state: AppStateType) => {\r\n\treturn state.auth.submit_error\r\n}\r\n\r\nexport const getSubmitErrorCode = (state: AppStateType) => {\r\n\treturn state.auth.submit_error_code\r\n}\r\n\r\nexport const getCurrentRoute = (state: AppStateType) => {\r\n\treturn state.app.current_route\r\n}\r\n\r\nexport const getCurrentUserLogin = (state: AppStateType) => {\r\n\treturn state.auth.login\r\n}\r\n\r\nexport const getCurrentUserEmail = (state: AppStateType) => {\r\n\treturn state.auth.email\r\n}\r\n\r\nexport const getCurrentUserId = (state: AppStateType) => {\r\n\treturn state.auth.id\r\n}\r\n\r\nexport const getCaptchaUrl = (state: AppStateType) => {\r\n\treturn state.auth.captcha_url\r\n}\r\n\r\nexport const getCurrentVisitedUserData = (state: AppStateType) => {\r\n\treturn state.profile.current_visited_user\r\n}\r\n\r\nexport const getCurrentVisitedUserstatus = (state: AppStateType) => {\r\n\treturn state.profile.status\r\n}\r\n\r\nexport const getIsFetchingProfileData = (state: AppStateType) => {\r\n\treturn state.profile.is_fetching\r\n}\r\n\r\nexport const getIsPhotoUploaded = (state: AppStateType) => {\r\n\treturn state.profile.photoUploaded\r\n}\r\n\r\nexport const getDialogs = (state: AppStateType) => {\r\n\treturn state.dialogs\r\n}\r\n\r\nexport const getPosts = (state: AppStateType) => {\r\n\treturn state.profile.posts\r\n}\r\n\r\nexport const getFriendsBarItems = (state: AppStateType) => {\r\n\treturn state.sidebar.friends\r\n}\r\n\r\nexport const getSideMenuItems = (state: AppStateType) => {\r\n\treturn state.sidebar.menu_items\r\n}\r\n","import { Reducer } from \"redux\";\r\n\r\nconst initial_state = {\r\n\tnews_posts: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tauthor: \"Buddy Melon\",\r\n\t\t\tauthor_url: \"/buddymelon\",\r\n\t\t\tpost_content: \"Today's Weather is perfect!\",\r\n\t\t\tlikes_count: 26\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tauthor: \"John Smith\",\r\n\t\t\tauthor_url: \"/johnsmith\",\r\n\t\t\tpost_content: \"Hello! I'm learning React js too!!\",\r\n\t\t\tlikes_count: 202\r\n\t\t}\r\n\t]\r\n};\r\n\r\nexport type newsType = typeof initial_state;\r\n\r\nconst news_reducer: Reducer<newsType> = (state = initial_state, action: unknown): newsType => {\r\n\treturn state;\r\n}\r\n\r\nexport default news_reducer;","import { Reducer } from \"redux\";\r\n\r\ntype friendType = {\r\n\tid: number,\r\n\tfriend_avatar: string,\r\n\tfriend_name: string\r\n}\r\n\r\ntype menuItemType = {\r\n\tid: number,\r\n\ticon: string,\r\n\titem: string,\r\n\tpath: string\r\n}\r\n\r\nexport type sidebarType = {\r\n\tfriends: Array<friendType>,\r\n\tmenu_items: Array<menuItemType>\r\n}\r\n\r\nconst initial_state: sidebarType = {\r\n\tfriends: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tfriend_avatar: \"https://million-wallpapers.ru/wallpapers/5/51/424703866779568/nejtiri-2017-avatara-2.jpg\",\r\n\t\t\tfriend_name: \"Tairin\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tfriend_avatar: \"https://pbs.twimg.com/media/EgFRKr2WAAA-RRY.jpg\",\r\n\t\t\tfriend_name: \"Tsu Tei\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tfriend_avatar: \"https://www.film.ru/sites/default/files/images/Sigourney-Weaver2.jpg\",\r\n\t\t\tfriend_name: \"Grace Austin\"\r\n\t\t}\r\n\t],\r\n\tmenu_items: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\ticon: \"👤\",\r\n\t\t\titem: \"Profile\",\r\n\t\t\tpath: \"/profile\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\ticon: \"✉\",\r\n\t\t\titem: \"Messages\",\r\n\t\t\tpath: \"/dialogs\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\ticon: \"👥\",\r\n\t\t\titem: \"Users\",\r\n\t\t\tpath: \"/users\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\ticon: \"📢\",\r\n\t\t\titem: \"News\",\r\n\t\t\tpath: \"/news\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\ticon: \"♫\",\r\n\t\t\titem: \"Music\",\r\n\t\t\tpath: \"/music\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 6,\r\n\t\t\ticon: \"⛮\",\r\n\t\t\titem: \"Settings\",\r\n\t\t\tpath: \"/settings\"\r\n\t\t},\r\n\t]\r\n};\r\n\r\nconst sidebar_reducer: Reducer<sidebarType> = (state = initial_state,action: unknown) => {\r\n\treturn state;\r\n}\r\n\r\nexport default sidebar_reducer;","export function updateObjectInArray<T> (items: T[], itemId: number, objPropName: string, newObjProps: object) {\r\n\treturn items.map(item => {\r\n\t\t//@ts-ignore\r\n\t\tif (item[objPropName] === itemId) { //\r\n\t\t\treturn {\r\n\t\t\t\t...item,\r\n\t\t\t\t...newObjProps\r\n\t\t\t}\r\n\t\t}\r\n\t\telse return item;\r\n\t})\r\n}\r\n\r\n","import { Action, Dispatch, Reducer } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { followRT, usersAPI } from '../../api/API';\r\nimport { updateObjectInArray } from '../../components/common/object-helpers';\r\nimport { AppStateType } from '../redux_store';\r\nconst FOLLOW_USER = 'wos/users/FOLLOW_USER'\r\nconst UNFOLLOW_USER = 'wos/users/UNFOLLOW_USER'\r\nconst SET_USERS = 'wos/users/SET_USERS'\r\nconst SET_CURRENT_USERS_PAGE = 'wos/users/SET_CURRENT_USERS_PAGE'\r\nconst TOGGLE_FOLLOWING = 'wos/users/TOGGLE_FOLLOWING'\r\n\r\n\r\n\r\n//ACs Types\r\ninterface IFollowUserAC extends Action<typeof FOLLOW_USER> {\r\n\tuser_id: number\r\n}\r\n\r\ninterface IUnfollowUserAC extends Action<typeof UNFOLLOW_USER> {\r\n\tuser_id: number\r\n}\r\n\r\ninterface ISetUsersAC extends Action<typeof SET_USERS> {\r\n\tusers: Array<userType>,\r\n}\r\n\r\ninterface ISetCurrentUserPageAC extends Action<typeof SET_CURRENT_USERS_PAGE> {\r\n\tactive_page: number\r\n}\r\n\r\ninterface IToggleFollowingAC extends Action<typeof TOGGLE_FOLLOWING> {\r\n\tis_fetching: boolean,\r\n\tuser_id: number\r\n}\r\n\r\ntype UsersAC_Types = IFollowUserAC | IUnfollowUserAC | ISetUsersAC | ISetCurrentUserPageAC | IToggleFollowingAC\r\n\r\n\r\n//ACs\r\nconst followUserAC = (user_id: number):IFollowUserAC => ({\ttype: FOLLOW_USER,user_id: user_id});\r\nconst unfollowUserAC = (user_id:number):IUnfollowUserAC => ({\ttype: UNFOLLOW_USER,user_id: user_id});\r\nconst setUsers = (users: Array<userType>):ISetUsersAC => ({\ttype: SET_USERS,users: users});\r\nconst setCurrentUsersPage = (active_page = 1):ISetCurrentUserPageAC => ({ type: SET_CURRENT_USERS_PAGE,active_page: active_page });\r\nconst toggleFollowing = (user_id: number,is_fetching: boolean):IToggleFollowingAC => ({ type: TOGGLE_FOLLOWING, user_id, is_fetching});\r\n\r\n\r\n\r\ntype dispatch = Dispatch<UsersAC_Types>;\r\ntype ThunkType = ThunkAction<Promise<void>,AppStateType,unknown,UsersAC_Types>\r\n\r\n\r\n//THUNK CREATORS\r\nconst _followUnfollowFlow = async (dispatch: dispatch, userId: number, AC: (userId: number) => UsersAC_Types, APImethod: (userId: number) => any) => {//API method should be properly typed\r\n\tdispatch(toggleFollowing(userId, true));\r\n\tconst response: followRT = await APImethod(userId)\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(toggleFollowing(userId, false));\r\n\t\tdispatch(AC(userId));\r\n\t}\r\n\telse {\r\n\t\tconsole.error('Error has occured when tried to follow/unfollow')\r\n\t}\r\n}\r\n\r\nexport const getUsers = (active_page: number, page_size: number): ThunkType => async (dispatch) => {\r\n\tconst data = await usersAPI.getUsers(active_page, page_size)\r\n\tif (data) {\r\n\t\tif(!data.error) {\r\n\t\t\tdispatch(setUsers(data.items));\r\n\t\t\tdispatch(setCurrentUsersPage(active_page));\r\n\t\t}\r\n\t}\r\n}\r\nexport const followUser = (userId: number): ThunkType => async (dispatch) => {\r\n\t_followUnfollowFlow(dispatch, userId, followUserAC, usersAPI.followUser)\r\n}\r\nexport const unfollowUser = (userId: number): ThunkType => async (dispatch) => {\r\n\t_followUnfollowFlow(dispatch, userId, unfollowUserAC, usersAPI.unfollowUser)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//Users Types\r\nexport type userType = {\r\n\tname: string,\r\n\tid: number,\r\n\tphotos: {\r\n\t\tsmall: null|string,\r\n\t\tlarge: null|string\r\n\t},\r\n\tstatus: null|string,\r\n\tfollowed: false\r\n}\r\n\r\ntype users_type = {\r\n\tusers: Array<userType>,\r\n\tpage_size: number,\r\n\ttotal_users_count: number,\r\n\tactive_page: number,\r\n\tis_fetching: boolean,\r\n\tis_following: Array<number>,\r\n\tportion_size: number\r\n}\r\n\r\nconst initial_state: users_type = {\r\n\tusers: [],\r\n\tpage_size: 10,\r\n\ttotal_users_count: 501,\r\n\tactive_page: 1,\r\n\tis_fetching: false,\r\n\tis_following: [], //Array of followed users ids.\r\n\tportion_size: 20\r\n};\r\n\r\nconst users_reducer: Reducer<users_type, UsersAC_Types> = (state = initial_state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updateObjectInArray(state.users, action.user_id, 'id', {followed: true})\r\n\t\t\t}\r\n\t\tcase UNFOLLOW_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updateObjectInArray(state.users, action.user_id, 'id', {followed: false})\r\n\t\t\t}\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: [...action.users],\r\n\t\t\t}\r\n\t\tcase SET_CURRENT_USERS_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tactive_page: action.active_page\r\n\t\t\t}\r\n\t\tcase TOGGLE_FOLLOWING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tis_following: action.is_fetching\r\n\t\t\t\t\t? [...state.is_following, action.user_id]\r\n\t\t\t\t\t: state.is_following.filter(item => item !== action.user_id)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\nexport default users_reducer;","import {applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport dialogs_reducer from './reducers/dialogs_reducer';\r\nimport news_reducer from './reducers/news_reducer';\r\nimport profile_reducer from './reducers/profile_reducer';\r\nimport sidebar_reducer from './reducers/sidebar_reducer';\r\nimport users_reducer from './reducers/users_reducer';\r\nimport auth_reducer from './reducers/auth_reducer';\r\nimport app_reducer from './reducers/app_reducer';\r\nimport thunkMiddleWare from 'redux-thunk';\r\n\r\nlet root_reducer = combineReducers({\r\n\tprofile: profile_reducer,\r\n\tdialogs: dialogs_reducer,\r\n\tnews: news_reducer,\r\n\tsidebar: sidebar_reducer,\r\n\tusers: users_reducer,\r\n\tauth: auth_reducer,\r\n\tapp: app_reducer\r\n})\r\ntype RootReducerType = typeof root_reducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n\t}\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(root_reducer, /* preloadedState, */ composeEnhancers(applyMiddleware(thunkMiddleWare),\r\n));\r\n\r\n\r\n\r\nexport default store;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Header.module.css';\r\n\r\n\r\ntype PropsType = {\r\n\tis_auth: boolean,\r\n\tlogin: string | null,\r\n\tsignOut: () => void\r\n}\r\n\r\n\r\nconst Header: React.FC<PropsType> = ({is_auth,login,signOut}) => {\r\n\tlet signed = is_auth ? [<span key=\"span\">Welcome, {login}</span>,<button key='signOut' onClick={signOut}>Sign Out</button>] : <NavLink key=\"signin\" to='/login'>Sign in</NavLink>\r\n\treturn(\r\n\t\t<header className={s.header}>\r\n\t\t\t<img src='https://dummyimage.com/160x46/ffffff/5cc6fe&text=React+Net' alt=\"fuck-off\"></img>\r\n\t\t\t<div className={s.loginBlock}>\r\n\t\t\t\t{signed}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import React, { Component } from 'react';\r\nimport { connect, MapStateToProps } from 'react-redux';\r\nimport { getIsAuth,getCurrentUserEmail,getCurrentUserLogin } from '../../redux/selectors';\r\nimport { signOut } from '../../redux/reducers/auth_reducer';\r\nimport Header from './Header';\r\nimport { AppStateType } from '../../redux/redux_store';\r\n\r\n\r\n\r\ntype mapStateToPropsType = {\r\n\tis_auth: boolean,\r\n\tlogin: string | null,\r\n\temail: string | null\r\n}\r\n\r\ntype mapDispatchToPropsType = {\r\n\tsignOut: () => void\r\n}\r\n\r\ntype PropsType = mapStateToPropsType & mapDispatchToPropsType\r\n\r\n\r\nclass HeaderContainer extends Component<PropsType> {\r\n\trender() {\r\n\t\treturn <Header is_auth={this.props.is_auth} login={this.props.login} signOut={this.props.signOut} />\r\n\t}\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn (\r\n\t\t{\r\n\t\t\temail: getCurrentUserEmail(state),\r\n\t\t\tlogin: getCurrentUserLogin(state),\r\n\t\t\tis_auth: getIsAuth(state),\r\n\t\t}\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport default connect<mapStateToPropsType,mapDispatchToPropsType,{},AppStateType>(mapStateToProps, { signOut })(HeaderContainer);\r\n\r\n","import React from 'react';\r\nimport s from './Track.module.css';\r\n\r\ntype PropsTypes = {\r\n\ttrack_name: string,\r\n\ttrack_duration: string\r\n}\r\n\r\nconst Track: React.FC<PropsTypes> = (props) => {\r\n\treturn(\r\n\t\t<div className={s.track}>\r\n\t\t\t<div className={s.cover}>\r\n\t\t\t♪\r\n\t\t\t</div>\r\n\t\t\t<div className={s.track_name}>{props.track_name}</div>\r\n\t\t\t<div className={s.track_duration}>{props.track_duration}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Track;\r\n","import React from 'react';\r\nimport Track from './Track/Track';\r\nimport s from './Music.module.css';\r\n\r\ntype PropsTypes = {\r\n\t\r\n}\r\n\r\nconst Music: React.FC<PropsTypes> = (props: unknown) => {\r\n\treturn(\r\n\t\t<div className={s.music_wrapper}>\r\n\t\t\t<div className={s.music_header}>My music</div>\r\n\t\t\t<Track track_name=\"Живи - Вася Обломов\" track_duration=\"4:37\" />\r\n\t\t\t<Track track_name=\"Dance Of The Fireflies - Lifescapes\" track_duration=\"4:38\" />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Music;\r\n","import React from 'react';\r\nimport s from './Settings.module.css';\r\n\r\nconst Settings: React.FC<unknown> = (props) => {\r\n\treturn(\r\n\t\t<div className={s.settings_wrapper}>\r\n\t\t\t<div className={s.settings_header}>Personal info</div>\r\n\t\t\t<div className={s.person_info}>\r\n\t\t\t\t<div className={s.name}>\r\n\t\t\t\t\tYour name: <input type=\"text\" value=\"Dem\" /> Your lastname: <input type=\"text\" value=\"Pigeon\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.login_info}>\r\n\t\t\t\t\tYour email: <input type=\"email\" value=\"Dem.Pigeon@gmail.com\" /> Your password: <input type=\"password\" value=\"PigeonRules\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.phone_number}>\r\n\t\t\t\t\tYour phone number: <input type=\"text\" value='+1351245239' />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={s.action_buttons}>\r\n\t\t\t\t<button>Save Changes</button>\r\n\t\t\t\t<button>Discard Changes</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Settings;\r\n","import React from 'react';\r\nimport s from '../Sidebar.module.css';\r\n\r\nconst Friend = (props) => {\r\n\treturn (\r\n\t\t<a className={s.friend} href={`/${props.id}`}>\r\n\t\t\t<img className={s.friend_avatar} src={props.friend_avatar} alt=\"ico\"></img>\r\n\t\t\t<div className={s.friend_name}>{props.friend_name}</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default Friend;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from '../Sidebar.module.css';\r\n\r\nconst MenuItem = (props) => {\r\n\treturn(\r\n\t\t<div className={s.menu_item} id={props.id}>\r\n\t\t\t\t\t<NavLink exact to={props.path} activeClassName={s.active}>\r\n\t\t\t\t\t\t<div className={s.menu_item_icon}>{`${props.icon}`}</div>\r\n\t\t\t\t\t\t<div className={s.menu_item_item}>{props.item}</div> \r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport s from './Sidebar.module.css';\r\nimport Friend from './Friend/Friend';\r\nimport MenuItem from './Menu_items/MenuItem';\r\nimport { sidebarType } from '../../redux/reducers/sidebar_reducer';\r\n\r\ntype PropsTypes = sidebarType & {is_auth: boolean}\r\n\r\nconst Sidebar: React.FC<PropsTypes> = (props) => {\r\n\tlet friends = [...props.friends];\r\n\tlet menu_items = [...props.menu_items];\r\n\r\n\treturn (\r\n\t\t<div className={s.sidebar_wrapper}>\r\n\t\t\t<nav className={s.menu}>\r\n\t\t\t\t{menu_items.map(\r\n\t\t\t\t\tmenu_item => \r\n\t\t\t\t\t\t<MenuItem key={menu_item.id} id={menu_item.id} path={menu_item.path} icon={menu_item.icon} item={menu_item.item} />\r\n\t\t\t\t)}\r\n\t\t\t</nav>\r\n\t\t\t{props.is_auth && <Route exact path=\"/profile\" render={() =>\r\n\t\t\t\t<div className={s.friends_bar}>\r\n\t\t\t\t\t<div className={s.friends_header}>Friends</div>\r\n\t\t\t\t\t<div className={s.friends_block}>\r\n\t\t\t\t\t\t{friends.map(friend =>\r\n\t\t\t\t\t\t\t<Friend key={friend.id} id={friend.id} friend_avatar={friend.friend_avatar} friend_name={friend.friend_name} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t} />}\r\n\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AppStateType } from '../../redux/redux_store';\r\nimport { sidebarType } from '../../redux/reducers/sidebar_reducer';\r\nimport { getFriendsBarItems, getIsAuth, getSideMenuItems } from '../../redux/selectors';\r\nimport Sidebar from './Sidebar';\r\n\r\ntype mapStateToPropsType = sidebarType & {is_auth: boolean}\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn ({\r\n\t\tfriends: getFriendsBarItems(state),\r\n\t\tmenu_items: getSideMenuItems(state),\r\n\t\tis_auth: getIsAuth(state)\r\n\t});\r\n};\r\n\r\n\r\nconst SidebarContainer = connect<mapStateToPropsType,{},{},AppStateType>(mapStateToProps,{})(Sidebar);\r\n\r\nexport default SidebarContainer;\r\n","import React from 'react';\r\nimport s from './NewsPost.module.css';\r\n\r\ntype PropsTypes = {\r\n\tid: number,\r\n\tauthor: string,\r\n\tauthor_url: string, \r\n\tpost_content: string\r\n\tlikes_count: number\r\n}\r\nconst NewsPost: React.FC<PropsTypes> = (props) => {\r\n\treturn(\r\n\t\t<div className={s.item} id={`${props.id}`}>\r\n\t\t\t<img src=\"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1\" alt=\"avatar\"/>\r\n\t\t\t<div className={s.post_content_wrapper}>\r\n\t\t\t\t<div className={s.author}>\r\n\t\t\t\t\t<a href={props.author_url}>{props.author}</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.post_content}>{props.post_content}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={s.action_buttons}>\r\n\t\t\t\t<div className={s.likes}>{props.likes_count}{\"\\u2764\"} like</div>\t\t\t\r\n\t\t\t\t<div className={s.add_comment}>add comment</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default NewsPost;\r\n","import React from 'react';\r\nimport { newsType } from '../../redux/reducers/news_reducer';\r\nimport s from './News.module.css';\r\nimport NewsPost from './NewsPost/NewsPost';\r\n\r\ntype PropsTypes = newsType;\r\n\r\nconst News: React.FC<PropsTypes> = (props) => {\r\n\tlet news_posts = [...props.news_posts];\r\n\r\n\treturn(\r\n\t\t<div className={s.posts}>\r\n\t\t\t{news_posts.map((post) => <NewsPost id={post.id} author={post.author} author_url={post.author_url} post_content={post.post_content} likes_count={post.likes_count} />)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default News;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport News from './News';\r\nimport { newsType } from '../../redux/reducers/news_reducer'\r\nimport { AppStateType } from '../../redux/redux_store';\r\n\r\n\r\ntype mapStateToPropsType = newsType;\r\n\r\ntype mapDispatchToPropsType = {\r\n\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn ({\r\n\t\tnews_posts: state.news.news_posts,\r\n\t});\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n\treturn ({\r\n\r\n\t})\r\n}\r\n\r\nconst NewsContainer = connect<mapStateToPropsType,mapDispatchToPropsType,{},AppStateType>(mapStateToProps,mapDispatchToProps)(News);\r\n\r\nexport default NewsContainer;\r\n","import React from 'react';\r\nimport s from './User.module.css';\r\nimport avatar from '../../../assets/images/avatar.png';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ntype PropsType = {\r\n\tuser_id: number,\r\n\tuser_name: string,\r\n\tuser_avatar: string | null,\r\n\tuser_status_message: string | null,\r\n\tis_followed: boolean,\r\n\tis_following: boolean,\r\n\tfollowUser: (userId: number) => void, \r\n\tunfollowUser: (userId: number) => void, \r\n}\r\n\r\n\r\nconst User: React.FC<PropsType> = ({\r\n\tuser_id, \r\n\tuser_name, \r\n\tuser_avatar, \r\n\tuser_status_message, \r\n\tis_followed, \r\n\tis_following, \r\n\tfollowUser, \r\n\tunfollowUser\r\n}) => {\r\n\tconst followThisUser = (user_id: number) => {\r\n\t\tfollowUser(user_id)\r\n\t};\r\n\r\n\tconst unfollowThisUser = (user_id: number) => {\r\n\t\tunfollowUser(user_id)\r\n\t};\r\n\r\n\tconst button = is_followed ?\r\n\t\t<button className={s.followed} disabled={is_following} onClick={() => unfollowThisUser(user_id)}>Unfollow</button> :\r\n\t\t<button onClick={() => followThisUser(user_id)} disabled={is_following}>Follow</button>;\r\n\r\n\treturn (\r\n\t\t<div className={s.item} id={`${user_id}`}> {/**this is for HTML inner types */}\r\n\t\t\t<div className={s.avatar_follow}>\r\n\t\t\t\t<NavLink to={`/profile/${user_id}`}>\r\n\t\t\t\t\t<img src={user_avatar ? user_avatar : avatar} alt=\"avatar\" />\r\n\t\t\t\t</NavLink>\r\n\t\t\t\t{button}\r\n\t\t\t</div>\r\n\t\t\t<div className={s.user_info_wrapper}>\r\n\t\t\t\t<div className={s.user_info}>\r\n\t\t\t\t\t<div className={s.user_name}>\r\n\t\t\t\t\t\t<NavLink to={`/profile/${user_id}`}>{user_name}</NavLink>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={s.user_status_message}>\r\n\t\t\t\t\t\t\"{user_status_message}\"\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default User;\r\n","import s from './Paginator.module.css';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\ntype PropsType = {\r\n\ttotal_items_count: number,\r\n\tpage_size: number,\r\n\tactive_page: number,\r\n\tset_active_page: (pageNumber: number) => void,\r\n\tportion_size: number\r\n}\r\n\r\nconst Paginator : React.FC<PropsType> = ({ total_items_count,page_size, active_page, set_active_page, portion_size }) => {\r\n\tlet pagesCount = Math.ceil(total_items_count / page_size);\r\n\r\n\tlet pages: Array<number> = [];\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i);\r\n\t}\r\n\t\r\n\tlet portionsCount = Math.ceil(pagesCount/portion_size);\r\n\tlet [portionNumber, setPortionNumber] = useState(1);\r\n\tlet leftPortionNumber = (portionNumber - 1) * portion_size + 1;\r\n\tlet rightPortionNumber = portionNumber * portion_size;\r\n\r\n\tuseEffect(() => {\r\n\t\tlet portionNumberToDisplay = Math.ceil(active_page/portion_size);\r\n\t\tsetPortionNumber(portionNumberToDisplay);\r\n\t},[active_page])\r\n\r\n\tconst pagesItems = pages.filter(p => p >= leftPortionNumber && p <= rightPortionNumber).map(pageNumber => {\r\n\t\tif (pageNumber === active_page) {\r\n\t\t\treturn <span key={pageNumber} className={`${s.page} ${s.active_page}`}>{pageNumber}</span>\r\n\t\t}\r\n\t\treturn <span key={pageNumber} className={s.page} onClick={() => { set_active_page(pageNumber) }}>{pageNumber}</span>\r\n\t});\r\n\treturn (\r\n\t\t<div className={s.pagination}>\r\n\t\t\t{portionNumber>1 && <button onClick={() => {setPortionNumber(portionNumber-1)}}>Prev</button>}\r\n\t\t\t\t{pagesItems}\r\n\t\t\t{portionNumber<portionsCount && <button onClick={() => {setPortionNumber(portionNumber+1)}}>Next</button>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Paginator;\r\n","import s from './Users.module.css';\r\nimport User from './User/User';\r\nimport React from 'react';\r\nimport Paginator from '../common/Paginator';\r\nimport { userType } from '../../redux/reducers/users_reducer';\r\n\r\ntype PropsType = {\r\n\tusers: Array<userType>,\r\n\ttotal_users_count: number,\r\n\tpage_size: number,\r\n\tactive_page: number,\r\n\tset_active_page: (pageNumber: number) => void,\r\n\tportion_size: number\r\n\tfollowUser: (userId: number) => void, \r\n\tunfollowUser: (userId: number) => void, \r\n\tis_following: Array<number>\r\n}\r\n\r\nconst Users: React.FC<PropsType> = ({\r\n\tusers, \r\n\ttotal_users_count, \r\n\tpage_size, \r\n\tactive_page, \r\n\tset_active_page, \r\n\tfollowUser, \r\n\tunfollowUser, \r\n\tis_following, \r\n\tportion_size\r\n}) => {\r\n\treturn (\r\n\t\t<div className={s.users}>\r\n\t\t\t<Paginator page_size={page_size} active_page={active_page} set_active_page={set_active_page} total_items_count={total_users_count} portion_size={portion_size} />\r\n\t\t\t{users.map(u => {\r\n\t\t\t\tlet is_follow = false;\r\n\t\t\t\tfor (let user of is_following) {\r\n\t\t\t\t\tif (user === u.id) {\r\n\t\t\t\t\t\tis_follow = true; \r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn <User\r\n\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\tuser_id={u.id}\r\n\t\t\t\t\tuser_name={u.name}\r\n\t\t\t\t\tuser_avatar={u.photos.small}\r\n\t\t\t\t\tuser_status_message={u.status}\r\n\t\t\t\t\tis_followed={u.followed}\r\n\t\t\t\t\tis_following={is_follow}\r\n\t\t\t\t\tfollowUser={followUser}\r\n\t\t\t\t\tunfollowUser={unfollowUser}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Users;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getUsers, followUser, unfollowUser } from '../../redux/reducers/users_reducer'; \r\nimport Users from './Users';\r\nimport Preloader from '../common/Preloader';\r\nimport { compose } from 'redux';\r\nimport { userType } from '../../redux/reducers/users_reducer';\r\nimport { AppStateType } from '../../redux/redux_store';\r\n\r\ntype MapStatePropsType = {\r\n\tactive_page: number,\r\n\tpage_size: number,\r\n\tusers: Array<userType>,\r\n\tis_fetching: boolean,\r\n\ttotal_users_count: number,\r\n\tportion_size: number\r\n\tis_following: Array<number>\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n\tgetUsers: (active_page: number, page_size: number) => void,\r\n\tfollowUser: (userId: number) => void,\r\n\tunfollowUser: (userId: number) => void,\r\n}\r\n\r\n// type OwnPropsType = { //THat is needed for connet typization\r\n// \thaha: string\r\n// }\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType;\r\n\r\nclass UsersContainer extends Component<PropsType> {\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getUsers(this.props.active_page,this.props.page_size);\r\n\t}\r\n\r\n\tonPageChange = (pageNumber: number) => {\r\n\t\tthis.props.getUsers(pageNumber,this.props.page_size);\r\n\t}\r\n\r\n\trender() {\t\t\r\n\t\tconst users = [...this.props.users];\r\n\t\tconst follow = (userId: number) => {\r\n\t\t\tthis.props.followUser(userId);\r\n\t\t}\r\n\t\tconst unfollow = (userId: number) => {\r\n\t\t\tthis.props.unfollowUser(userId);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{this.props.is_fetching && <Preloader />}\r\n\t\t\t\t<Users users={users} page_size={this.props.page_size} total_users_count={this.props.total_users_count} active_page={this.props.active_page} followUser={follow} unfollowUser={unfollow} set_active_page={this.onPageChange} portion_size={this.props.portion_size} is_following={this.props.is_following} />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps (state: AppStateType): MapStatePropsType {\r\n\tconst {users,page_size,total_users_count,active_page,is_fetching,is_following,portion_size} = state.users;\r\n\treturn ({\r\n\t\tusers: [...users],\r\n\t\tpage_size,\r\n\t\ttotal_users_count,\r\n\t\tactive_page,\r\n\t\tis_fetching,\r\n\t\tis_following: [...is_following],\r\n\t\tportion_size,\r\n\t});\r\n};\r\n\r\nexport default compose (\r\n\tconnect<MapStatePropsType,MapDispatchPropsType,{},AppStateType>(mapStateToProps, { //JS looks for equal named imports(varibles)\r\n\t\tfollowUser, //same as followUser: followUser\r\n\t\tunfollowUser, //React-redux at the same time takes these ACs\r\n\t\tgetUsers,//and wraps it with dispatches inside CBs\r\n\t})\r\n)(UsersContainer);\r\n\r\n","import { ErrorMessage, Field, Form, Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport s from '../Login/LoginPage.module.css';\r\n\r\n\r\ntype PropsTypes = {\r\n\terror: string,\r\n\terror_code: number | null,\r\n\tis_auth: boolean,\r\n\tcurrent_route: string,\r\n\tcaptchaUrl: string | null,\r\n\tsubmitLogin: (email: string, password: string, rememberMe: boolean, captcha: string | null) => void,\r\n}\r\n\r\nconst LoginForm: React.FC<PropsTypes> = ({submitLogin,error,is_auth,current_route,captchaUrl}) => {\r\n\tif(is_auth) return <Redirect to={current_route} />\r\n\r\n\tconst initialValues = {\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\trememberMe: false,\r\n\t\tcaptcha: null\r\n\t}\r\n\r\n\tconst onSubmit = (values: typeof initialValues) => {\r\n\t\tlet {email,password,rememberMe,captcha} = values;\r\n\t\tsubmitLogin(email,password,rememberMe,captcha)\r\n\t\t// .then(response => console.log(response));\r\n\t}\r\n\r\n\tconst validationSchema = Yup.object({\r\n\t\temail: Yup.string().email('Invalid email format').min(10, \"Must be longer than 10 characters\")\r\n    .max(40, \"Nice try, nobody has a email that long\").required('Required'),\r\n\t\tpassword: Yup.string().min(8, \"Must be longer than 8 characters\").required('Required')\r\n\t})\r\n\r\n\tconst validationSchemaWithCaptcha = Yup.object({\r\n\t\temail: Yup.string().email('Invalid email format').min(10, \"Must be longer than 10 characters\")\r\n    .max(40, \"Nice try, nobody has a email that long\").required('Required'),\r\n\t\tpassword: Yup.string().min(8, \"Must be longer than 8 characters\").required('Required'),\r\n\t\tcaptcha: Yup.string().min(4, \"Captcha must be longer than 3 characters\").required('Required')\r\n\t})\r\n\r\n\tlet serverErrorMessage = error && <div className={s.submit_error}>{error}</div>\r\n\r\n\tlet captcha = captchaUrl && <div className={s.captcha}>\r\n\t\t<img src={captchaUrl} alt=\"captcha\"/>\r\n\t\t<Field \r\n\t\t\ttype=\"text\"\r\n\t\t\tname=\"captcha\"\r\n\t\t\tplaceholder=\"Type symbols u c on image here\"/>\r\n\t\t\t<ErrorMessage name=\"captcha\" />\r\n\t</div>\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={initialValues}\r\n\t\t\tvalidationSchema={captchaUrl? validationSchemaWithCaptcha:validationSchema}\r\n\t\t\tonSubmit={onSubmit}\r\n\t\t>\r\n\t\t\t<Form>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tplaceholder='email'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ErrorMessage name='email' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tplaceholder='password'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ErrorMessage name='password' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label htmlFor=\"rememberMe\">Remember Me </label>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"rememberMe\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{serverErrorMessage}\r\n\t\t\t\t{captcha}\r\n\t\t\t\t<button type=\"submit\">Submit</button>\r\n\t\t\t</Form>\r\n\t\t</Formik>\r\n\t);\r\n}\r\n\r\nexport default LoginForm;","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport LoginForm from '../Forms/LoginForm';\r\nimport { submitLogin,getCaptcha } from '../../redux/reducers/auth_reducer';\r\nimport s from './LoginPage.module.css';\r\nimport { getIsAuth,getSubmitError,getSubmitErrorCode,getCurrentRoute,getCaptchaUrl } from '../../redux/selectors';\r\nimport { AppStateType } from '../../redux/redux_store';\r\n\r\n\r\ntype mapStateToPropsType = {\r\n\terror: string,\r\n\terror_code: number | null,\r\n\tis_auth: boolean,\r\n\tcurrent_route: string,\r\n\tcaptcha_url: string | null,\r\n}\r\n\r\ntype mapDispatchToPropsType = {\r\n\tsubmitLogin: (email: string, password: string, rememberMe: boolean, captcha: any) => void,\r\n\tgetCaptcha: () => void\r\n}\r\n\r\ntype PropsTypes = mapStateToPropsType & mapDispatchToPropsType\r\n\r\n\r\nconst LoginPage: React.FC<PropsTypes> = ({submitLogin,error,error_code,is_auth,current_route,captcha_url,getCaptcha}) => {\r\n\tif(error_code === 10) getCaptcha();\r\n\tconst [captcha,setCaptcha] = useState(captcha_url);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCaptcha(captcha_url)\r\n\t},[captcha_url])\r\n\r\n\treturn (\r\n\t\t<div className={s.login_form}>\r\n\t\t\t<LoginForm submitLogin={submitLogin} captchaUrl={captcha} error={error} error_code={error_code} is_auth={is_auth} current_route={current_route} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStateToPropsType => ({\r\n\tis_auth: getIsAuth(state),\r\n\terror: getSubmitError(state),\r\n\terror_code: getSubmitErrorCode(state),\r\n\tcurrent_route: getCurrentRoute(state),\r\n\tcaptcha_url: getCaptchaUrl(state)\r\n})\r\n\r\nexport default connect<mapStateToPropsType,mapDispatchToPropsType,{},AppStateType>(mapStateToProps,{submitLogin,getCaptcha})(LoginPage);","import React from 'react';\r\nimport Preloader from './Preloader';\r\n\r\nconst withSuspense = (Component) => {\r\n\treturn (props) => {\r\n\t\treturn (\r\n\t\t\t<React.Suspense fallback={<Preloader />}>\r\n\t\t\t\t<Component {...props} />\r\n\t\t\t</React.Suspense>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withSuspense;\r\n","import { AppStateType } from './redux/redux_store';\r\nimport React, { Component } from 'react';\r\nimport './App.css';\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport Music from './components/Music/Music';\r\nimport Settings from './components/Settings/Settings';\r\nimport { Redirect, Route, Switch, withRouter } from 'react-router-dom';\r\nimport SidebarContainer from './components/Sidebar/SidebarContainer';\r\nimport NewsContainer from './components/News/NewsContainer';\r\nimport UsersContainer from './components/Users/UsersContainer';\r\nimport LoginPage from './components/Login/LoginPage';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport Preloader from './components/common/Preloader';\r\nimport { init_app } from './redux/reducers/app_reducer';\r\nimport withSuspense from './components/common/withSuspense';\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\n\r\nclass App extends Component<PropsTypes>{\r\n\tcomponentDidMount() {\r\n\t\tthis.props.init_app();\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(!this.props.initialized) return <Preloader />\r\n\t\telse return (\r\n\t\t\t<div className=\"app-wrapper\">\r\n\t\t\t\t<HeaderContainer />\r\n\t\t\t\t<SidebarContainer />\r\n\t\t\t\t<div className=\"main_wrapper\">\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/profile/:userId?'\r\n\t\t\t\t\t\trender={withSuspense(ProfileContainer)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\texact path='/'\r\n\t\t\t\t\t\trender={() => <Redirect to='/profile' />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/dialogs'\r\n\t\t\t\t\t\trender={withSuspense(DialogsContainer)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/news'\r\n\t\t\t\t\t\trender={() => <NewsContainer />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/music'\r\n\t\t\t\t\t\tcomponent={Music}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/settings'\r\n\t\t\t\t\t\tcomponent={Settings}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/users'\r\n\t\t\t\t\t\trender={() => <UsersContainer />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath='/login'\r\n\t\t\t\t\t\trender={() => <LoginPage />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n}\r\n\r\n\r\n\r\ntype mapStateToPropsType = {\r\n\tinitialized: boolean\r\n}\r\n\r\ntype mapDispatchToPropsType = {\r\n\tinit_app: () => void\r\n}\r\n\r\ntype PropsTypes = mapStateToPropsType & mapDispatchToPropsType;\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n\tinitialized: state.app.initialized\r\n})\r\n\r\nexport default compose(\r\n\twithRouter,\r\n\tconnect <mapStateToPropsType,mapDispatchToPropsType,{},AppStateType> (mapStateToProps, { init_app })\r\n)(App);\r\n","import store from './redux/redux_store';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport { HashRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store={store}>\r\n\t\t\t<HashRouter>\r\n\t\t\t\t<App />\r\n\t\t\t</HashRouter>\r\n\t\t</Provider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nwindow.store = store;","import { Action, Reducer } from \"redux\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { authAPI, securityAPI } from \"../../api/API\";\r\nimport { AppStateType } from \"../redux_store\";\r\nimport { getAuthDataRT } from './../../api/API';\r\n\r\n\r\nconst SET_AUTH_DATA = 'wos/auth/SET_AUTH_DATA'\r\nconst SET_IS_AUTH = 'wos/auth/SET_IS_AUTH'\r\n// const TOGGLE_CHECKING_AUTH = 'wos/auth/TOGGLE_CHECKING_AUTH'\r\nconst STOP_SUBMIT = 'wos/auth/STOP_SUBMIT'\r\nconst SET_CAPTCHA_URL = 'wos/auth/SET_CAPTCHA_URL'\r\n\r\n\r\n//ACs Types\r\ninterface ISetAuthDataAC extends Action<typeof SET_AUTH_DATA> {\r\n\tdata: {\r\n\t\tid: number | null,\r\n\t\temail: string | null,\r\n\t\tlogin: string | null\r\n\t}\r\n}\r\ninterface ISetIsAuthAC extends Action<typeof SET_IS_AUTH> {\r\n\tis_auth: boolean\r\n}\r\ninterface IStopSumbitAC extends Action<typeof STOP_SUBMIT> {\r\n\tsubmit_error: string,\r\n\tsubmit_error_code: number\r\n}\r\ninterface ISetCaptchaUrlAC extends Action<typeof SET_CAPTCHA_URL> {\r\n\tcaptcha_url: string\r\n}\r\n\r\ntype AuthAC_Types = ISetAuthDataAC | ISetIsAuthAC | IStopSumbitAC | ISetCaptchaUrlAC;\r\n\r\n\r\n//ACs\r\nconst setAuthData = (id: number | null, email: string | null, login: string | null): ISetAuthDataAC => ({\r\n\ttype: SET_AUTH_DATA,\r\n\tdata: {\r\n\t\tid,\r\n\t\temail,\r\n\t\tlogin\r\n\t}\r\n})\r\nconst setIsAuth = (is_auth: boolean): ISetIsAuthAC => ({\r\n\ttype: SET_IS_AUTH,\r\n\tis_auth\r\n})\r\nconst stopSubmit = (error: string, error_code: number): IStopSumbitAC => ({\r\n\ttype: STOP_SUBMIT,\r\n\tsubmit_error: error,\r\n\tsubmit_error_code: error_code\r\n})\r\nconst getCaptchaUrlSuccess = (captcha_url: string): ISetCaptchaUrlAC => ({\r\n\ttype: SET_CAPTCHA_URL,\r\n\tcaptcha_url: captcha_url\r\n})\r\n\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, AuthAC_Types>\r\n\r\n\r\n// THUNK CREATORS\r\nexport const getAuthData = (): ThunkType => async (dispatch) => {\r\n\ttry {\r\n\t\tconst response = await authAPI.getAuthData()\r\n\t\tif (response?.data) {\r\n\t\t\tlet { id, email, login } = response.data.data;\r\n\t\t\tdispatch(setAuthData(id, email, login));\r\n\t\t\tif (login) {\r\n\t\t\t\tdispatch(setIsAuth(true));\r\n\t\t\t} else dispatch(setIsAuth(false));\r\n\t\t}//removed return statement cause nobody needed it and because it requires special typing\r\n\t}\r\n\tcatch(e) {\r\n\t\tconsole.error(e);\r\n\t}\r\n}\r\n\r\n\r\nexport const submitLogin = (email: string, password: string, rememberMe: boolean, captcha: string | null): ThunkType => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await authAPI.sendLoginData(email, password, rememberMe, captcha)\r\n\t\tif (response?.data.resultCode === 0) {\r\n\t\t\tconst response = await authAPI.getAuthData();\r\n\t\t\tif (response?.data.resultCode === 1) {\r\n\t\t\t\tdispatch(setAuthData(null, '', ''));\r\n\t\t\t\tdispatch(setIsAuth(false));\r\n\t\t\t}\r\n\t\t\telse if (response?.data.resultCode === 0) {\r\n\t\t\t\tlet { id, email, login } = response?.data.data;\r\n\t\t\t\tdispatch(setAuthData(id, email, login));\r\n\t\t\t\tdispatch(setIsAuth(true));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(response?.data.messages){\r\n\t\t\tdispatch(stopSubmit(response.data.messages[0], response.data.resultCode))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const signOut = (): ThunkType => {\r\n\treturn async (dispatch) => {\r\n\t\tconst response = await authAPI.signOut()\r\n\t\tif (response?.data.resultCode === 0) {\r\n\t\t\tconst response = await authAPI.getAuthData()\r\n\t\t\tif (response?.data.resultCode === 1) {\r\n\t\t\t\tdispatch(setAuthData(null, '', ''));\r\n\t\t\t\tdispatch(setIsAuth(false));\r\n\t\t\t}\r\n\t\t\telse if (response?.data.resultCode === 0) {\r\n\t\t\t\tlet { id, email, login } = response?.data.data;\r\n\t\t\t\tdispatch(setAuthData(id, email, login));\r\n\t\t\t\tdispatch(setIsAuth(true));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse console.log(response?.data.messages[0]);\r\n\t}\r\n}\r\n\r\nexport const getCaptcha = (): ThunkType => async (dispatch) => {\r\n\tconst captcha_url = await securityAPI.getCaptchaUrl()\r\n\tif (captcha_url) dispatch(getCaptchaUrlSuccess(captcha_url));\r\n\telse console.log(\"AIN'T GET ANY CAPTCHA\");\r\n}\r\n\r\n\r\n\r\n\r\nconst initial_state = {\r\n\tid: null as null | number,\r\n\temail: null as null | string,\r\n\tlogin: null as null | string,\r\n\tis_auth: false,\r\n\tchecking_auth: false,\r\n\tsubmit_error: '',\r\n\tsubmit_error_code: null as null | number,\r\n\tcaptcha_url: null as null | string\r\n};\r\n\r\ntype authType = typeof initial_state;\r\n\r\nconst auth_reducer: Reducer<authType, AuthAC_Types> = (state = initial_state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_AUTH_DATA:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.data\r\n\t\t\t}\r\n\t\tcase SET_IS_AUTH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tis_auth: action.is_auth\r\n\t\t\t}\r\n\t\t// case TOGGLE_CHECKING_AUTH:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tchecking_auth: action.checking_auth\r\n\t\t// \t}\r\n\t\tcase STOP_SUBMIT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsubmit_error: action.submit_error,\r\n\t\t\t\tsubmit_error_code: action.submit_error_code\r\n\t\t\t}\r\n\t\tcase SET_CAPTCHA_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcaptcha_url: action.captcha_url,\r\n\t\t\t\tsubmit_error_code: null\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default auth_reducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings_wrapper\":\"Settings_settings_wrapper__4goJj\",\"settings_header\":\"Settings_settings_header__3mefI\",\"person_info\":\"Settings_person_info__1wior\",\"name\":\"Settings_name__NuVgy\",\"login_info\":\"Settings_login_info__1-cb8\",\"phone_number\":\"Settings_phone_number__2qE5-\",\"action_buttons\":\"Settings_action_buttons__339V8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"NewsPost_item__3G5Xn\",\"post_content_wrapper\":\"NewsPost_post_content_wrapper__2jj08\",\"author\":\"NewsPost_author__3BwoG\",\"post_content\":\"NewsPost_post_content__2PyTX\",\"action_buttons\":\"NewsPost_action_buttons__rp7Ay\",\"likes\":\"NewsPost_likes__35b8P\",\"add_comment\":\"NewsPost_add_comment__gC2BU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"User_item__3Eeyk\",\"avatar_follow\":\"User_avatar_follow__kt1Dt\",\"followed\":\"User_followed__s79pA\",\"user_info_wrapper\":\"User_user_info_wrapper__1vI1_\",\"user_info\":\"User_user_info__3BjXL\",\"user_name\":\"User_user_name__h6kjB\",\"user_status_message\":\"User_user_status_message__3_dA0\",\"user_location_wrapper\":\"User_user_location_wrapper__PthDx\",\"post_content_wrapper\":\"User_post_content_wrapper__2Wsvm\",\"author\":\"User_author__3L731\",\"post_content\":\"User_post_content__3VCJj\",\"action_buttons\":\"User_action_buttons__JxG0b\",\"likes\":\"User_likes__1FX6z\",\"add_comment\":\"User_add_comment__3Qv_f\"};","export default __webpack_public_path__ + \"static/media/preloader.96123056.svg\";","import React from 'react';\r\nimport preloader from '../../assets/images/preloader.svg';\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<img src={preloader} alt=\"preloader\" style={{ width: '30px' }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_form\":\"LoginPage_login_form__aMETl\",\"submit_error\":\"LoginPage_submit_error__1P_pm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"track\":\"Track_track__1xXq5\",\"cover\":\"Track_cover__1MvTg\",\"track_name\":\"Track_track_name__GIUJR\",\"track_duration\":\"Track_track_duration__3SX5C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Paginator_pagination__1_AFX\",\"page\":\"Paginator_page__1mm3c\",\"active_page\":\"Paginator_active_page__IHo59\"};","import { Action, Reducer } from \"redux\"\r\nimport { ThunkAction } from \"redux-thunk\"\r\nimport { AppStateType } from \"../redux_store\"\r\nimport { getAuthData } from \"./auth_reducer\"\r\n\r\nconst INIT_APP = 'wos/app/INIT_APP'\r\nconst SET_CURRENT_ROUTE = 'wos/app/SET_CURRENT_ROUTE'\r\n\r\n\r\n\r\n//ACs Types\r\ninterface IInitAppAC extends Action<typeof INIT_APP> {\r\n\tinitialized: boolean\r\n}\r\n\r\ninterface ISetCurrentRouteAC extends Action<typeof SET_CURRENT_ROUTE> {\r\n\tcurrent_route: string\r\n}\r\n\r\ntype AppAC_Types = IInitAppAC | ISetCurrentRouteAC;\r\n\r\n\r\n//ACs\r\nconst initApp = (initialized: boolean):IInitAppAC => ({\r\n\ttype: INIT_APP,\r\n\tinitialized\r\n})\r\n\r\nexport const setCurrentRoute = (current_route: string):ISetCurrentRouteAC => ({\r\n\ttype: SET_CURRENT_ROUTE,\r\n\tcurrent_route\r\n})\r\n\r\n\r\ntype ThunkType = ThunkAction<Promise<void>,AppStateType,unknown,AppAC_Types>\r\n\r\n\r\n\r\n// THUNK CREATORS\r\nexport const init_app = (): ThunkType => async (dispatch) => {\r\n\tawait dispatch(getAuthData());\r\n\tdispatch(initApp(true));\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst initial_state = {\r\n\tinitialized: false,\r\n\tcurrent_route: ''\r\n};\r\n\r\ntype appType = typeof initial_state\r\n\r\nconst app_reducer: Reducer<appType,AppAC_Types> = (state = initial_state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase INIT_APP:\r\n\t\t\t// console.log('app_reducer.INIT_APP - prev.state+action.initialized',state,action.initialized);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: action.initialized\r\n\t\t\t}\r\n\t\tcase SET_CURRENT_ROUTE:\r\n\t\t\t// console.log('app_reducer.SET_CURRENT_ROUTE - prev.state+action.current_route',state,action.current_route);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrent_route: action.current_route\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default app_reducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1IeR0\",\"loginBlock\":\"Header_loginBlock__3BZjB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"music_wrapper\":\"Music_music_wrapper__3cvpV\",\"music_header\":\"Music_music_header__aohfk\"};","import { Action, Reducer } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { profileAPI } from '../../api/API';\r\nimport { AppStateType } from '../redux_store';\r\n\r\n\r\nconst ADD_POST = 'wos/profile/ADD_POST'\r\nconst DELETE_POST = 'wos/profile/DELETE_POST'\r\nconst SET_STATUS = 'wos/profile/SET_STATUS'\r\nconst TOGGLE_IS_FETCHING = 'wos/profile/TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IS_PHOTO_UPLOADED = 'wos/profile/TOGGLE_IS_PHOTO_UPLOADED'\r\nconst SET_USER_PROFILE = 'wos/profile/SET_USER_PROFILE'\r\n\r\n\r\n\r\n\r\n//ACs Types\r\ninterface IAddPostAC extends Action<typeof ADD_POST> {\r\n\tnew_post: string\r\n};\r\n\r\ninterface IDeletePostAC extends Action<typeof DELETE_POST> {\r\n\tpostId: number\r\n};\r\n\r\ninterface ISetUserProfileAC extends Action<typeof SET_USER_PROFILE> {\r\n\tcurrent_visited_user: currentVisitedUserType\r\n}\r\n\r\ninterface IToggleIsFetchingAC extends Action<typeof TOGGLE_IS_FETCHING> {\r\n\tis_fetching: boolean\r\n}\r\n\r\ninterface IToggleIsPhotoUploadedAC extends Action<typeof TOGGLE_IS_PHOTO_UPLOADED> {\r\n\tphotoUploaded: boolean\r\n}\r\n\r\ninterface ISetStatusAC extends Action<typeof SET_STATUS> {\r\n\tstatus: string\r\n}\r\n\r\nexport type profileActionTypes = IAddPostAC | IDeletePostAC | ISetUserProfileAC | ISetStatusAC | IToggleIsFetchingAC | IToggleIsPhotoUploadedAC;\r\n\r\n\r\n//ACs\r\nexport const addPostAC = (new_post: string): IAddPostAC => ({ \r\n\ttype: ADD_POST, \r\n\tnew_post \r\n});\r\nexport const deletePostAC = (postId: number): IDeletePostAC => ({\r\n\ttype: DELETE_POST,\r\n\tpostId\r\n})\r\nconst setUserProfile = (current_visited_user: currentVisitedUserType): ISetUserProfileAC => ({\r\n\ttype: SET_USER_PROFILE,\r\n\tcurrent_visited_user: current_visited_user\r\n})\r\nconst setStatus = (status: string): ISetStatusAC => ({\r\n\ttype: SET_STATUS,\r\n\tstatus\r\n})\r\nconst toggleIsFetching = (is_fetching: boolean): IToggleIsFetchingAC => {\r\n\tconsole.log(\"toggleIsFetching - Dispatched\", new Date().getSeconds());\r\n\treturn ({ \t\ttype: TOGGLE_IS_FETCHING, \r\n\tis_fetching \r\n})};\r\nexport const toggleIsPhotoUploaded = (photoUploaded: boolean): IToggleIsPhotoUploadedAC => {\r\n\tconsole.log(\"toggleIsPhotoUploaded - Dispatched\", new Date().getSeconds());\r\n\treturn({ \t\ttype: TOGGLE_IS_PHOTO_UPLOADED, \r\n\tphotoUploaded\r\n})};\r\n\r\n\r\ntype ThunkType = ThunkAction<Promise<void>,AppStateType,unknown,profileActionTypes>;\r\n\r\n\r\n//THUNK CREATORS\r\nexport const getUserData = (userId: number | null, isFetching: boolean): ThunkType => async (dispatch) => {\r\n\tconsole.log(\"getUserData - Dispatched\", new Date().getSeconds());\r\n\tif(isFetching) return\r\n\tdispatch(toggleIsFetching(true));\r\n\tconst data = await profileAPI.getUserData(userId)\r\n\tdispatch(setUserProfile(data));\r\n\tconst response = await profileAPI.getStatus(userId)\r\n\tif (response.data)\r\n\tdispatch(setStatus(response.data))\r\n\tdispatch(toggleIsFetching(false));\r\n}\r\nexport const updateStatus = (status: string | null): ThunkType => async (dispatch) => {\r\n\ttry {\r\n\t\tif(status === null) return;\r\n\t\tconst response = await profileAPI.setStatus(status)\r\n\t\tif (response.data.resultCode === 0) dispatch(setStatus(status));\r\n\t}\r\n\tcatch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n}\r\n\r\nexport const savePhoto = (photo: any, userId: number | null): ThunkType => async (dispatch) => {\r\n\tconsole.log(\"savePhoto - Dispatched\", new Date().getSeconds());\r\n\t\r\n\tconst response = await profileAPI.setProfilePhoto(photo)\r\n\tif (response.data.resultCode === 0) {\r\n\t\tconsole.log(`photoUploaded changed to true`);\r\n\t\tdispatch(toggleIsPhotoUploaded(true))\r\n\t}\r\n}\r\n\r\n\r\nexport type  userContactsType = {\r\n\tfacebook: string | null,\r\n\twebsite: string | null,\r\n\tvk: string | null,\r\n\ttwitter: string | null,\r\n\tinstagram: string | null,\r\n\tyoutube: string | null,\r\n\tgithub: string | null,\r\n\tmainLink: string | null\r\n}\r\n\r\nexport type currentVisitedUserType = {\r\n\taboutMe: string | null,\r\n\tcontacts: userContactsType,\r\n\tlookingForAJob: boolean,\r\n\tlookingForAJobDescription: string | null,\r\n\tfullName: string,\r\n\tuserId: number,\r\n\tphotos: {\r\n\t\tsmall: string | null,\r\n\t\tlarge: string | null\r\n\t}\r\n}\r\n\r\nexport type postType = {\r\n\tid: number,\r\n\tauthor_name: string,\r\n\tauthor_id: number,\r\n\tpost_content: string,\r\n\tlikes_count: number\r\n}\r\n\r\ntype profile_type = {\r\n\tposts: Array<postType>,\r\n\tcurrent_visited_user: null | currentVisitedUserType,\r\n\tstatus: string,\r\n\tis_fetching: boolean,\r\n\tphotoUploaded: boolean\r\n}\r\n\r\nconst initial_state: profile_type = {\r\n\tposts: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tauthor_name: \"Dem Pigeon\",\r\n\t\t\tauthor_id: 14327,\r\n\t\t\tpost_content: \"Hey, My name is Dem Pigeon\",\r\n\t\t\tlikes_count: 13\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tauthor_name: \"Dem Pigeon\",\r\n\t\t\tauthor_id: 14327,\r\n\t\t\tpost_content: \"This is my first post\",\r\n\t\t\tlikes_count: 2\r\n\t\t}\r\n\t],\r\n\tcurrent_visited_user: null,\r\n\tstatus: '',\r\n\tis_fetching: false,\r\n\tphotoUploaded: false\r\n};\r\n\r\nconst profile_reducer: Reducer<profile_type,profileActionTypes> = (state = initial_state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [...state.posts, {\r\n\t\t\t\t\tid: state.posts.length + 1,\r\n\t\t\t\t\tauthor_name: \"Dem Pigoen\",\r\n\t\t\t\t\tauthor_id: 14327,\r\n\t\t\t\t\tpost_content: action.new_post,\r\n\t\t\t\t\tlikes_count: 0\r\n\t\t\t\t}],\r\n\t\t\t}\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter(post => post.id !== action.postId),\r\n\t\t\t}\r\n\t\tcase SET_USER_PROFILE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrent_visited_user: action.current_visited_user\r\n\t\t\t}\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.status\r\n\t\t\t}\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tis_fetching: action.is_fetching\r\n\t\t\t}\r\n\t\tcase TOGGLE_IS_PHOTO_UPLOADED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tphotoUploaded: action.photoUploaded\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nexport default profile_reducer;\r\n","import { Action, Reducer } from 'redux';\r\nconst SEND_MESSAGE = 'wos/dialogs/SEND_MESSAGE'\r\n\r\n\r\n\r\n//AC Types\r\ninterface ISendMessage extends Action<typeof SEND_MESSAGE> {\r\n\tnew_message: string\r\n};\r\n\r\ntype dialogsActionTypes = ISendMessage;\r\n\r\n\r\n\r\n//AС\r\nexport const sendMessage = (new_message: string):ISendMessage => ({\ttype: SEND_MESSAGE, new_message });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport type dialogs_item_type = {\r\n\tid: string | number,\r\n\tdialog_name: string,\r\n\tdialog_avatar: string\r\n}\r\n\r\ntype messages_item_type = {\r\n\tmessage_id: number,\r\n\tmessage: string,\r\n\tauthor_id: number | string,\r\n\tauthor_name: string,\r\n}\r\n\r\nexport type dialogs_type = {\r\n\tdialogs: Array<dialogs_item_type>,\r\n\tmessages: Array<messages_item_type>,\r\n\tnewMessageState: string\r\n}\r\n\r\nconst initial_state: dialogs_type =  {\r\n\tdialogs: [\r\n\t\t{ id: \"pavlo\", dialog_name: \"Pavlo\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/7/7e/70px-Pavle.jpg\" },\r\n\t\t{ id: \"meyrin\", dialog_name: \"Meyrin\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/d/de/70px-Marin.jpg\" },\r\n\t\t{ id: \"katya\", dialog_name: \"Katya\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/2/2c/70px-Katia.jpg\" },\r\n\t\t{ id: \"bruno\", dialog_name: \"Bruno\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/d/d6/70px-Bruno.jpg\" },\r\n\t\t{ id: \"marko\", dialog_name: \"Marko\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/c/cc/70px-Marko.jpg\" },\r\n\t\t{ id: \"roman\", dialog_name: \"Roman\", dialog_avatar: \"https://static.wikia.nocookie.net/this-war-of-mine/images/0/07/70px-Roman.jpg\" }\r\n\t],\r\n\tmessages: [\r\n\t\t{ message_id: 1, message: \"We need to get food.\", author_id: 0, author_name: \"Dem Pigeon\" },\r\n\t\t{ message_id: 2, message: \"This is so wrong to steal food from others like us!\", author_id: \"pavlo\", author_name: \"Pavlo\" },\r\n\t\t{ message_id: 3, message: \"I would eat anything!\", author_id: 0, author_name: \"Dem Pigeon\" },\r\n\t\t{ message_id: 4, message: \"I haven't slept for a long time\", author_id: \"pavlo\", author_name: \"Pavlo\" },\r\n\t\t{ message_id: 5, message: \"Smoke is soothing me.\", author_id: 0, author_name: \"Dem Pigeon\" },\r\n\t\t{ message_id: 6, message: \"I hope we will be able to warm up this shelter\", author_id: \"pavlo\", author_name: \"Pavlo\" }\r\n\t],\r\n\tnewMessageState: \"\"\r\n};\r\n\r\n\r\nconst dialogs_reducer: Reducer<dialogs_type, dialogsActionTypes> = (state = initial_state,action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SEND_MESSAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages,{\r\n\t\t\t\t\tmessage_id: state.messages.length + 1,\r\n\t\t\t\t\tauthor_id: 0,\r\n\t\t\t\t\tauthor_name: \"Dem Pigoen\",\r\n\t\t\t\t\tmessage: action.new_message,\r\n\t\t\t\t}],\r\n\t\t\t\tnewMessageState: \"\"\r\n\t\t\t} as dialogs_type\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default dialogs_reducer;","export default __webpack_public_path__ + \"static/media/avatar.9273afa0.png\";"],"sourceRoot":""}