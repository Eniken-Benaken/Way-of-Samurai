(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[3],{254:function(t,e,o){t.exports={profileInfo_wrapper:"ProfileInfo_profileInfo_wrapper__PT8YA",banner:"ProfileInfo_banner__2jObx",person_info:"ProfileInfo_person_info__34u4h",avatar_block:"ProfileInfo_avatar_block__1nFGo",user_name:"ProfileInfo_user_name__38mv_",looking_for_job:"ProfileInfo_looking_for_job__2IveP",description_block:"ProfileInfo_description_block__1TkpC",description_content:"ProfileInfo_description_content__2lwQJ",description_header:"ProfileInfo_description_header__iiG_L",status:"ProfileInfo_status__2Tz-H",contact:"ProfileInfo_contact__1d0hE",change_info_button:"ProfileInfo_change_info_button__2v3RH",icons_author:"ProfileInfo_icons_author__17o1k"}},255:function(t,e,o){"use strict";var a=o(2),s=o(4),n=o(5),c=o(10),i=o(11),r=o(1),l=o(0),u=o.n(l),b=o(16),d=o(9),j=o(17),p=function(t){return{is_auth:Object(j.j)(t)}};e.a=function(t){var e=function(e){Object(c.a)(l,e);var o=Object(i.a)(l);function l(){return Object(s.a)(this,l),o.apply(this,arguments)}return Object(n.a)(l,[{key:"render",value:function(){return this.props.is_auth?Object(r.jsx)(t,Object(a.a)({},this.props)):Object(r.jsx)(d.a,{to:"/login"})}}]),l}(u.a.Component);return Object(b.b)(p)(e)}},260:function(t,e,o){t.exports={profile_wrapper:"Profile_profile_wrapper__1YLEU"}},261:function(t,e,o){t.exports={new_post_form:"PostForm_new_post_form__12U9Z",new_post_input:"PostForm_new_post_input__2boj8",add_post_button:"PostForm_add_post_button__2zl-f"}},262:function(t,e,o){t.exports={posts:"MyPosts_posts__3ng4M",new_post:"MyPosts_new_post__bwkT4",new_post_content:"MyPosts_new_post_content__2WQf-"}},263:function(t,e,o){t.exports={item:"Post_item__1I4R3",post_content_wrapper:"Post_post_content_wrapper__3Z6oL",author:"Post_author__1dN6P",post_content:"Post_post_content__1rFbh",action_buttons:"Post_action_buttons__1kYno",likes:"Post_likes__34yDk",add_comment:"Post_add_comment__nNteY"}},265:function(t,e,o){"use strict";o.r(e);var a=o(2),s=o(4),n=o(5),c=o(10),i=o(11),r=o(1),l=o(0),u=o(260),b=o.n(u),d=o(16),j=o(83),p=o(17),h=o(26),f=o(35),_=o(261),m=o.n(_),O=function(t){var e=t.addPost,o=f.a({new_post:f.b().max(200,"Your post text is too long")});return Object(r.jsx)(h.d,{initialValues:{new_post:""},validationSchema:o,onSubmit:function(t,o){var a=o.resetForm;try{e(t.new_post),a({})}catch(s){console.error(s)}},children:Object(r.jsxs)(h.c,{className:m.a.new_post_form,children:[Object(r.jsxs)("div",{className:m.a.new_post_input,children:[Object(r.jsx)(h.b,{component:"textarea",name:"new_post"}),Object(r.jsx)(h.a,{name:"new_post"})]}),Object(r.jsx)("button",{type:"submit",className:m.a.add_post_button,children:"Add Post"})]})})},x=o(262),v=o.n(x),g=o(263),w=o.n(g),k=function(t){return Object(r.jsxs)("div",{className:w.a.item,id:"".concat(t.id),children:[Object(r.jsx)("img",{src:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1",alt:"avatar"}),Object(r.jsxs)("div",{className:w.a.post_content_wrapper,children:[Object(r.jsx)("div",{className:w.a.author,children:Object(r.jsx)("a",{href:"#",children:t.author})}),Object(r.jsx)("div",{className:w.a.post_content,children:t.post_content})]}),Object(r.jsxs)("div",{className:w.a.action_buttons,children:[Object(r.jsxs)("div",{className:w.a.likes,children:[t.likes_count,"\u2764"," like"]}),Object(r.jsx)("div",{className:w.a.add_comment,children:"add comment"})]})]})},P=function(t){var e=t.posts;return Object(r.jsxs)("div",{className:v.a.posts,children:[Object(r.jsx)("div",{className:v.a.new_post,children:Object(r.jsx)(O,{addPost:function(e){t.addPostAC(e)}})}),e.map((function(t){return Object(r.jsx)(k,{id:t.id,author:t.author_name,post_content:t.post_content,likes_count:t.likes_count},t.id)}))]})},y=Object(d.b)((function(t){return{posts:Object(p.m)(t)}}),{addPostAC:j.a})(P),N=o(3),F=o.n(N),I=o(13),D=o(29),S=o(43),A=o(254),C=o.n(A),J=o(94),M=function(t){var e=t.fullName,o=t.userId,s=t.contacts,n=t.lookingForAJob,c=t.lookingForAJobDescription,i=t.submitProfileInfoChange,l=t.error,u=t.aboutMe,b=Object(a.a)(Object(a.a)({},s),{},{lookingForAJob:n,lookingForAJobDescription:c,fullName:e,aboutMe:u}),d=f.a({}),j=l&&Object(r.jsx)("div",{className:C.a.submit_error,children:l});return Object(r.jsx)(h.d,{initialValues:b,validationSchema:d,onSubmit:function(t){var e=t.lookingForAJob,a=t.lookingForAJobDescription,s=t.fullName,n=t.facebook,c=t.github,r=t.instagram,l=t.mainLink,u=t.twitter,b=t.vk,d=t.website,j=t.youtube,p=t.aboutMe;i({userId:o,fullName:s,lookingForAJob:e,aboutMe:p,lookingForAJobDescription:a,contacts:{facebook:n,github:c,instagram:r,mainLink:l,twitter:u,vk:b,website:d,youtube:j}})},children:Object(r.jsxs)(h.c,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"fullName",children:"Your Full Name is "}),Object(r.jsx)(h.b,{type:"text",name:"fullName",placeholder:"fullName"}),Object(r.jsx)(h.a,{name:"fullName"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJobDescription",children:"Describe your skills "}),Object(r.jsx)(h.b,{component:"textarea",name:"lookingForAJobDescription",placeholder:"lookingForAJobDescription"}),Object(r.jsx)(h.a,{name:"lookingForAJobDescription"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"aboutMe",children:"Tell about yourself "}),Object(r.jsx)(h.b,{component:"textarea",name:"aboutMe",placeholder:"aboutMe"}),Object(r.jsx)(h.a,{name:"aboutMe"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"facebook",children:"Your facebook account link"}),Object(r.jsx)(h.b,{type:"text",name:"facebook",placeholder:"facebook"}),Object(r.jsx)(h.a,{name:"facebook"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"github",children:"Your github account link"}),Object(r.jsx)(h.b,{type:"text",name:"github",placeholder:"github"}),Object(r.jsx)(h.a,{name:"github"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"instagram",children:"Your instagram account link"}),Object(r.jsx)(h.b,{type:"text",name:"instagram",placeholder:"instagram"}),Object(r.jsx)(h.a,{name:"instagram"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"mainLink",children:"Your mainLink"}),Object(r.jsx)(h.b,{type:"text",name:"mainLink",placeholder:"mainLink"}),Object(r.jsx)(h.a,{name:"mainLink"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"twitter",children:"Your twitter account link"}),Object(r.jsx)(h.b,{type:"text",name:"twitter",placeholder:"twitter"}),Object(r.jsx)(h.a,{name:"twitter"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"vk",children:"Your vk account link"}),Object(r.jsx)(h.b,{type:"text",name:"vk",placeholder:"vk"}),Object(r.jsx)(h.a,{name:"vk"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"website",children:"Your website"}),Object(r.jsx)(h.b,{type:"text",name:"website",placeholder:"website"}),Object(r.jsx)(h.a,{name:"website"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"youtube",children:"Your youtube account link"}),Object(r.jsx)(h.b,{type:"text",name:"youtube",placeholder:"youtube"}),Object(r.jsx)(h.a,{name:"youtube"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJob",children:"I'm looking for a job "}),Object(r.jsx)(h.b,{type:"checkbox",name:"lookingForAJob"})]}),j,Object(r.jsx)("button",{type:"submit",children:"Submit"})]})})},U=function(t){var e=t.statusText,o=t.ownProfile,a=t.updateStatus,s=t.statusUpdateError,n=Object(l.useState)(e),c=Object(D.a)(n,2),i=c[0],u=c[1],b=Object(l.useState)(!1),d=Object(D.a)(b,2),j=d[0],p=d[1],h=Object(l.useState)(s),f=Object(D.a)(h,2);f[0],f[1];(""===i||null===i&&o)&&u("Double-click here to add status"),Object(l.useEffect)((function(){u(e)}),[e]);var _=function(){p(!j)};return o?j?Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{"data-testid":"statusChangeInput",type:"text",autoFocus:!0,onChange:function(t){u(t.target.value)},value:i||""}),Object(r.jsx)("button",{"data-testid":"saveStatusButton",onClick:function(){_(),a(i)},children:"Save Changes"})]}):Object(r.jsx)("div",{"data-testid":"ownStatusText",onDoubleClick:_,className:C.a.status,children:e},"status"):Object(r.jsx)("div",{"data-testid":"statusText",children:i},"status")},Y=function(t){var e=t.fullName,o=t.is_looking,a=t.avatar,s=t.ownProfile,n=t.onPhotoUpload,c=t.status,i=t.updateStatus,l=t.contacts,u=t.setEditMode,b=t.lookingForAJobDescription,d=t.aboutMe,j=t.statusUpdateError;return Object(r.jsxs)("div",{className:C.a.profileInfo_wrapper,children:[Object(r.jsx)("div",{className:C.a.banner,children:Object(r.jsx)("img",{src:"https://source.unsplash.com/1000x200/?city",alt:"newyear"})}),Object(r.jsxs)("div",{className:C.a.person_info,children:[Object(r.jsxs)("div",{className:C.a.avatar_block,children:[Object(r.jsxs)("div",{className:C.a.user_name,children:[e," ",o]}),a,s&&Object(r.jsx)("input",{type:"file",onChange:n})]}),Object(r.jsxs)("div",{className:C.a.description_block,children:[Object(r.jsx)("h3",{className:C.a.description_header,children:"Status: "}),Object(r.jsx)(U,{statusText:c,ownProfile:s,updateStatus:i,statusUpdateError:j||""}),Object(r.jsx)("h3",{className:C.a.description_header,children:"About me: "}),Object(r.jsx)("div",{className:C.a.description_content,children:d}),Object(r.jsx)("h3",{className:C.a.description_header,children:"My Skills:"}),Object(r.jsx)("div",{className:C.a.description_content,children:b}),Object(r.jsx)("h3",{className:C.a.description_header,children:"Contacts:"}),l,s&&Object(r.jsx)("button",{onClick:function(){return u(!0)},className:C.a.change_info_button,children:"Change Your Info"}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/dave-gandy",title:"Dave Gandy",children:"Dave Gandy"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons",children:"Smashicons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/prettycons",title:"prettycons",children:"prettycons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:C.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect",children:"Pixel perfect"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})]})]})},L=o(14),E=function(t){var e=t.current_visited_user,o=t.is_fetching,a=t.status,s=t.updateStatus,n=t.user_id,c=t.savePhoto,i=t.ownProfile,u=t.icons,b=Object(l.useState)(null),d=Object(D.a)(b,2),j=d[0],p=(d[1],Object(l.useState)(!1)),h=Object(D.a)(p,2),f=h[0],_=h[1],m=Object(l.useState)(null),O=Object(D.a)(m,2),x=O[0],v=O[1];if(o)return Object(r.jsx)(S.a,{});if(!e)return Object(r.jsx)(S.a,{});var g=e.lookingForAJob?Object(r.jsx)("span",{className:C.a.looking_for_job,children:"\ud83e\udd11"}):Object(r.jsx)("span",{className:C.a.looking_for_job,children:"\ud83e\udd20"}),w=[];for(var k in e.contacts)e.contacts[k]&&w.push(Object(r.jsx)("a",{className:C.a.contact,href:e.contacts[k],children:Object(r.jsx)("img",{className:C.a.contact_icon,src:u["".concat(k,"Icon")],alt:k,title:k})},k));var P=e.photos.large?Object(r.jsx)("img",{src:e.photos.large,alt:"avatar"}):Object(r.jsx)("img",{src:J.a,alt:"avatar"}),y=function(){var t=Object(I.a)(F.a.mark((function t(e){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.files.length?c(e.target.files[0],n):console.log("No file loaded");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(I.a)(F.a.mark((function t(e){var o;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.b.setProfileInfo(e);case 2:o=t.sent,console.log(o),0===o.data.resultCode?_(!1):o.data.messages.length&&v(o.data.messages[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return f?Object(r.jsx)(M,{userId:e.userId,fullName:e.fullName,contacts:e.contacts,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,submitProfileInfoChange:N,error:x,aboutMe:e.aboutMe}):Object(r.jsx)(Y,{fullName:e.fullName,is_looking:g,avatar:P,ownProfile:i,onPhotoUpload:y,status:a,updateStatus:s,contacts:w,setEditMode:_,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe,statusUpdateError:j})},T=function(t){return t.ownProfile?Object(r.jsxs)("main",{className:b.a.profile_wrapper,children:[Object(r.jsx)(E,Object(a.a)({},t)),Object(r.jsx)(y,{})]}):Object(r.jsx)("main",{className:b.a.profile_wrapper,children:Object(r.jsx)(E,Object(a.a)({},t))})},R=o(30),G=o(54),q=o(255),z=o(25),H=o(264),Q=o.p+"static/media/008-facebook.29ee2ba2.svg",V=o.p+"static/media/006-web-page.d33a2867.svg",Z=o.p+"static/media/005-vk.e9553eae.svg",B=o.p+"static/media/003-twitter.88d497cc.svg",W=o.p+"static/media/001-instagram.02967a62.svg",K=o.p+"static/media/002-youtube.5213846a.svg",X=o.p+"static/media/007-github-logo.d1bb13ce.svg",$=o.p+"static/media/004-network.1a646e33.svg",tt=o(9),et=function(t){Object(c.a)(o,t);var e=Object(i.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(t=e.call.apply(e,[this].concat(n))).ownProfile=!0,t.icons={facebookIcon:Q,websiteIcon:V,vkIcon:Z,twitterIcon:B,instagramIcon:W,youtubeIcon:K,githubIcon:X,mainLinkIcon:$},t}return Object(n.a)(o,[{key:"componentDidMount",value:function(){this.initProfile()}},{key:"shouldComponentUpdate",value:function(t){var e,o,a,s,n=t.match.params.userId!==this.props.match.params.userId;n&&console.log("url changed",(new Date).getSeconds());var c=t.photoUploaded!==this.props.photoUploaded;c&&console.log("photo changed from ".concat(null===(e=this.props.current_visited_user)||void 0===e||null===(o=e.photos.small)||void 0===o?void 0:o.slice(-3)," to ").concat(null===(a=t.current_visited_user)||void 0===a||null===(s=a.photos.small)||void 0===s?void 0:s.slice(-3)),(new Date).getSeconds());var i=t.status!==this.props.status;i&&console.log("status changed",(new Date).getSeconds());var r=t.user_id!==this.props.user_id;r&&console.log("userId changed",(new Date).getSeconds());var l=!H.isEqual(t.current_visited_user,this.props.current_visited_user),u=t.is_auth!==this.props.is_auth;u&&console.log("authState changed",(new Date).getSeconds());var b=n||i||r||l||u||c;return b&&console.log("something changed - rerender",(new Date).getSeconds()),b}},{key:"componentDidUpdate",value:function(){this.initProfile()}},{key:"initProfile",value:function(){var t=this.props.match.params.userId;if(t){if(this.ownProfile=!1,this.props.current_route==="/profile/".concat(t))return;this.props.setCurrentRoute("/profile/".concat(t)),this.props.getUserData(t)}else"/profile"!==this.props.current_route&&this.props.setCurrentRoute("/profile"),console.log("ProfileContainer calls - getUserData",(new Date).getSeconds()),this.props.getUserData(this.props.user_id),this.ownProfile=!0}},{key:"render",value:function(){return this.ownProfile&&!this.props.is_auth?Object(r.jsx)(tt.a,{to:"/login"}):Object(r.jsx)(T,Object(a.a)(Object(a.a)({},this.props),{},{ownProfile:this.ownProfile,icons:this.icons}))}}]),o}(l.Component);e.default=Object(z.d)(q.a,Object(d.b)((function(t){return{current_visited_user:Object(p.f)(t),is_fetching:Object(p.k)(t),status:Object(p.g)(t),user_id:Object(p.d)(t),current_route:Object(p.b)(t),is_auth:Object(p.j)(t),photoUploaded:Object(p.l)(t)}}),{getUserData:j.c,updateStatus:j.f,setCurrentRoute:G.c,savePhoto:j.d,getAuthData:R.b,toggleIsPhotoUploaded:j.e}))(et)}}]);
//# sourceMappingURL=3.96e9bdff.chunk.js.map