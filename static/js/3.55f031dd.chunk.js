(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[3],{255:function(t,e,o){t.exports={profileInfo_wrapper:"ProfileInfo_profileInfo_wrapper__PT8YA",banner:"ProfileInfo_banner__2jObx",person_info:"ProfileInfo_person_info__34u4h",avatar_block:"ProfileInfo_avatar_block__1nFGo",user_name:"ProfileInfo_user_name__38mv_",looking_for_job:"ProfileInfo_looking_for_job__2IveP",description_block:"ProfileInfo_description_block__1TkpC",description_content:"ProfileInfo_description_content__2lwQJ",description_header:"ProfileInfo_description_header__iiG_L",status:"ProfileInfo_status__2Tz-H",contact:"ProfileInfo_contact__1d0hE",change_info_button:"ProfileInfo_change_info_button__2v3RH",icons_author:"ProfileInfo_icons_author__17o1k"}},256:function(t,e,o){"use strict";var a=o(3),s=o(6),n=o(7),c=o(12),i=o(13),r=o(1),l=o(0),u=o.n(l),h=o(16),d=o(11),b=o(17),j=function(t){return{is_auth:Object(b.j)(t)}};e.a=function(t){var e=function(e){Object(c.a)(l,e);var o=Object(i.a)(l);function l(){return Object(s.a)(this,l),o.apply(this,arguments)}return Object(n.a)(l,[{key:"render",value:function(){return this.props.is_auth?Object(r.jsx)(t,Object(a.a)({},this.props)):Object(r.jsx)(d.a,{to:"/login"})}}]),l}(u.a.Component);return Object(h.b)(j)(e)}},261:function(t,e,o){t.exports={profile_wrapper:"Profile_profile_wrapper__1YLEU"}},262:function(t,e,o){t.exports={new_post_form:"PostForm_new_post_form__12U9Z",new_post_input:"PostForm_new_post_input__2boj8",add_post_button:"PostForm_add_post_button__2zl-f"}},263:function(t,e,o){t.exports={posts:"MyPosts_posts__3ng4M",new_post:"MyPosts_new_post__bwkT4",new_post_content:"MyPosts_new_post_content__2WQf-"}},264:function(t,e,o){t.exports={item:"Post_item__1I4R3",post_content_wrapper:"Post_post_content_wrapper__3Z6oL",author:"Post_author__1dN6P",post_content:"Post_post_content__1rFbh",action_buttons:"Post_action_buttons__1kYno",likes:"Post_likes__34yDk",add_comment:"Post_add_comment__nNteY"}},266:function(t,e,o){"use strict";o.r(e);var a=o(3),s=o(6),n=o(7),c=o(12),i=o(13),r=o(1),l=o(0),u=o(261),h=o.n(u),d=o(16),b=o(84),j=o(17),p=o(26),f=o(35),_=o(262),m=o.n(_),O=function(t){var e=t.addPost,o=f.a({new_post:f.b().max(200,"Your post text is too long")});return Object(r.jsx)(p.d,{initialValues:{new_post:""},validationSchema:o,onSubmit:function(t,o){var a=o.resetForm;try{e(t.new_post),a({})}catch(s){console.error(s)}},children:Object(r.jsxs)(p.c,{className:m.a.new_post_form,children:[Object(r.jsxs)("div",{className:m.a.new_post_input,children:[Object(r.jsx)(p.b,{component:"textarea",name:"new_post"}),Object(r.jsx)(p.a,{name:"new_post"})]}),Object(r.jsx)("button",{type:"submit",className:m.a.add_post_button,children:"Add Post"})]})})},g=o(263),x=o.n(g),w=o(264),v=o.n(w),k=function(t){return Object(r.jsxs)("div",{className:v.a.item,id:"".concat(t.id),children:[Object(r.jsx)("img",{src:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1",alt:"avatar"}),Object(r.jsxs)("div",{className:v.a.post_content_wrapper,children:[Object(r.jsx)("div",{className:v.a.author,children:Object(r.jsx)("a",{href:"#",children:t.author})}),Object(r.jsx)("div",{className:v.a.post_content,children:t.post_content})]}),Object(r.jsxs)("div",{className:v.a.action_buttons,children:[Object(r.jsxs)("div",{className:v.a.likes,children:[t.likes_count,"\u2764"," like"]}),Object(r.jsx)("div",{className:v.a.add_comment,children:"add comment"})]})]})},C=function(t){var e=t.posts;return Object(r.jsxs)("div",{className:x.a.posts,children:[Object(r.jsx)("div",{className:x.a.new_post,children:Object(r.jsx)(O,{addPost:function(e){t.addPostAC(e)}})}),e.map((function(t){return Object(r.jsx)(k,{id:t.id,author:t.author_name,post_content:t.post_content,likes_count:t.likes_count},t.id)}))]})},P=b.c.addPostAC,y=Object(d.b)((function(t){return{posts:Object(j.m)(t)}}),{addPostAC:P})(C),I=o(2),N=o.n(I),F=o(4),D=o(29),S=o(43),A=o(255),J=o.n(A),M=o(95),U=function(t){var e=t.fullName,o=t.userId,s=t.contacts,n=t.lookingForAJob,c=t.lookingForAJobDescription,i=t.submitProfileInfoChange,l=t.error,u=t.aboutMe,h=Object(a.a)(Object(a.a)({},s),{},{lookingForAJob:n,lookingForAJobDescription:c,fullName:e,aboutMe:u}),d=f.a({}),b=l?Object(r.jsx)("div",{className:J.a.submit_error,children:l}):null;return Object(r.jsx)(p.d,{initialValues:h,validationSchema:d,onSubmit:function(t){var e=t.lookingForAJob,a=t.lookingForAJobDescription,s=t.fullName,n=t.facebook,c=t.github,r=t.instagram,l=t.mainLink,u=t.twitter,h=t.vk,d=t.website,b=t.youtube,j=t.aboutMe;i({userId:o,fullName:s,lookingForAJob:e,aboutMe:j,lookingForAJobDescription:a,contacts:{facebook:n,github:c,instagram:r,mainLink:l,twitter:u,vk:h,website:d,youtube:b}})},children:Object(r.jsxs)(p.c,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"fullName",children:"Your Full Name is "}),Object(r.jsx)(p.b,{type:"text",name:"fullName",placeholder:"fullName"}),Object(r.jsx)(p.a,{name:"fullName"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJobDescription",children:"Describe your skills "}),Object(r.jsx)(p.b,{component:"textarea",name:"lookingForAJobDescription",placeholder:"lookingForAJobDescription"}),Object(r.jsx)(p.a,{name:"lookingForAJobDescription"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"aboutMe",children:"Tell about yourself "}),Object(r.jsx)(p.b,{component:"textarea",name:"aboutMe",placeholder:"aboutMe"}),Object(r.jsx)(p.a,{name:"aboutMe"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"facebook",children:"Your facebook account link"}),Object(r.jsx)(p.b,{type:"text",name:"facebook",placeholder:"facebook"}),Object(r.jsx)(p.a,{name:"facebook"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"github",children:"Your github account link"}),Object(r.jsx)(p.b,{type:"text",name:"github",placeholder:"github"}),Object(r.jsx)(p.a,{name:"github"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"instagram",children:"Your instagram account link"}),Object(r.jsx)(p.b,{type:"text",name:"instagram",placeholder:"instagram"}),Object(r.jsx)(p.a,{name:"instagram"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"mainLink",children:"Your mainLink"}),Object(r.jsx)(p.b,{type:"text",name:"mainLink",placeholder:"mainLink"}),Object(r.jsx)(p.a,{name:"mainLink"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"twitter",children:"Your twitter account link"}),Object(r.jsx)(p.b,{type:"text",name:"twitter",placeholder:"twitter"}),Object(r.jsx)(p.a,{name:"twitter"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"vk",children:"Your vk account link"}),Object(r.jsx)(p.b,{type:"text",name:"vk",placeholder:"vk"}),Object(r.jsx)(p.a,{name:"vk"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"website",children:"Your website"}),Object(r.jsx)(p.b,{type:"text",name:"website",placeholder:"website"}),Object(r.jsx)(p.a,{name:"website"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"youtube",children:"Your youtube account link"}),Object(r.jsx)(p.b,{type:"text",name:"youtube",placeholder:"youtube"}),Object(r.jsx)(p.a,{name:"youtube"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"lookingForAJob",children:"I'm looking for a job "}),Object(r.jsx)(p.b,{type:"checkbox",name:"lookingForAJob"})]}),b,Object(r.jsx)("button",{type:"submit",children:"Submit"})]})})},Y=function(t){var e=t.statusText,o=t.ownProfile,a=t.updateStatus,s=t.statusUpdateError,n=Object(l.useState)(e),c=Object(D.a)(n,2),i=c[0],u=c[1],h=Object(l.useState)(!1),d=Object(D.a)(h,2),b=d[0],j=d[1],p=Object(l.useState)(s),f=Object(D.a)(p,2);f[0],f[1];""!==i&&null!==i||!o||u("Double-click here to add status"),Object(l.useEffect)((function(){u(e)}),[e]);var _=function(){j(!b)};return o?b?Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{"data-testid":"statusChangeInput",type:"text",autoFocus:!0,onChange:function(t){u(t.target.value)},value:i||""}),Object(r.jsx)("button",{"data-testid":"saveStatusButton",onClick:function(){_(),a(i)},children:"Save Changes"})]}):Object(r.jsx)("div",{"data-testid":"ownStatusText",onDoubleClick:_,className:J.a.status,children:e},"status"):Object(r.jsx)("div",{"data-testid":"statusText",children:i},"status")},L=function(t){var e=t.fullName,o=t.is_looking,a=t.avatar,s=t.ownProfile,n=t.onPhotoUpload,c=t.status,i=t.updateStatus,l=t.contacts,u=t.setEditMode,h=t.lookingForAJobDescription,d=t.aboutMe,b=t.statusUpdateError;return Object(r.jsxs)("div",{className:J.a.profileInfo_wrapper,children:[Object(r.jsx)("div",{className:J.a.banner,children:Object(r.jsx)("img",{src:"https://source.unsplash.com/1000x200/?city",alt:"newyear"})}),Object(r.jsxs)("div",{className:J.a.person_info,children:[Object(r.jsxs)("div",{className:J.a.avatar_block,children:[Object(r.jsxs)("div",{className:J.a.user_name,children:[e," ",o]}),a,s&&Object(r.jsx)("input",{type:"file",onChange:n})]}),Object(r.jsxs)("div",{className:J.a.description_block,children:[Object(r.jsx)("h3",{className:J.a.description_header,children:"Status: "}),Object(r.jsx)(Y,{statusText:c,ownProfile:s,updateStatus:i,statusUpdateError:b||""}),Object(r.jsx)("h3",{className:J.a.description_header,children:"About me: "}),Object(r.jsx)("div",{className:J.a.description_content,children:d}),Object(r.jsx)("h3",{className:J.a.description_header,children:"My Skills:"}),Object(r.jsx)("div",{className:J.a.description_content,children:h}),Object(r.jsx)("h3",{className:J.a.description_header,children:"Contacts:"}),l,s&&Object(r.jsx)("button",{onClick:function(){return u(!0)},className:J.a.change_info_button,children:"Change Your Info"}),Object(r.jsxs)("div",{className:J.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/dave-gandy",title:"Dave Gandy",children:"Dave Gandy"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:J.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/smashicons",title:"Smashicons",children:"Smashicons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:J.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/prettycons",title:"prettycons",children:"prettycons"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:J.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("div",{className:J.a.icons_author,onClick:function(t){t.preventDefault()},children:["Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect",children:"Pixel perfect"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})]})]})},E=o(5),T=o(50),R=function(t){var e=t.current_visited_user,o=t.is_fetching,a=t.status,s=t.updateStatus,n=t.user_id,c=t.savePhoto,i=t.ownProfile,u=t.icons,h=Object(l.useState)(null),d=Object(D.a)(h,2),b=d[0],j=(d[1],Object(l.useState)(!1)),p=Object(D.a)(j,2),f=p[0],_=p[1],m=Object(l.useState)(""),O=Object(D.a)(m,2),g=O[0],x=O[1];if(o)return Object(r.jsx)(S.a,{});if(!e)return Object(r.jsx)(S.a,{});var w=e.lookingForAJob?Object(r.jsx)("span",{className:J.a.looking_for_job,children:"\ud83e\udd11"}):Object(r.jsx)("span",{className:J.a.looking_for_job,children:"\ud83e\udd20"}),v=[];for(var k in e.contacts)e.contacts[k]&&v.push(Object(r.jsx)("a",{className:J.a.contact,href:e.contacts[k],children:Object(r.jsx)("img",{className:J.a.contact_icon,src:u["".concat(k,"Icon")],alt:k,title:k})},k));var C=e.photos.large?Object(r.jsx)("img",{src:e.photos.large,alt:"avatar"}):Object(r.jsx)("img",{src:M.a,alt:"avatar"}),P=function(){var t=Object(F.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.files.length?c(e.target.files[0],n):console.log("No file loaded");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(F.a)(N.a.mark((function t(e){var o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.setProfileInfo(e);case 2:o=t.sent,console.log(o),o.data.resultCode===E.c.Success?_(!1):o.data.messages.length&&x(o.data.messages[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return f?Object(r.jsx)(U,{userId:e.userId,fullName:e.fullName,contacts:e.contacts,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,submitProfileInfoChange:y,error:g,aboutMe:e.aboutMe}):Object(r.jsx)(L,{fullName:e.fullName,is_looking:w,avatar:C,ownProfile:i,onPhotoUpload:P,status:a,updateStatus:s,contacts:v,setEditMode:_,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe,statusUpdateError:b})},G=function(t){return t.ownProfile?Object(r.jsxs)("main",{className:h.a.profile_wrapper,children:[Object(r.jsx)(R,Object(a.a)({},t)),Object(r.jsx)(y,{})]}):Object(r.jsx)("main",{className:h.a.profile_wrapper,children:Object(r.jsx)(R,Object(a.a)({},t))})},q=o(55),z=o(256),H=o(25),Q=o(265),V=o.p+"static/media/008-facebook.29ee2ba2.svg",Z=o.p+"static/media/006-web-page.d33a2867.svg",B=o.p+"static/media/005-vk.e9553eae.svg",W=o.p+"static/media/003-twitter.88d497cc.svg",K=o.p+"static/media/001-instagram.02967a62.svg",X=o.p+"static/media/002-youtube.5213846a.svg",$=o.p+"static/media/007-github-logo.d1bb13ce.svg",tt=o.p+"static/media/004-network.1a646e33.svg",et=o(11),ot=function(t){Object(c.a)(o,t);var e=Object(i.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(t=e.call.apply(e,[this].concat(n))).ownProfile=!1,t.urlChanged=!1,t.photoChanged=!1,t.statusChanged=!1,t.userInfoChanged=!1,t.authChanged=!1,t.icons={facebookIcon:V,websiteIcon:Z,vkIcon:B,twitterIcon:W,instagramIcon:K,youtubeIcon:X,githubIcon:$,mainLinkIcon:tt},t}return Object(n.a)(o,[{key:"componentDidMount",value:function(){this.initProfile()}},{key:"shouldComponentUpdate",value:function(t){return this.urlChanged=t.match.params.userId!==this.props.match.params.userId,this.urlChanged&&console.log("url changed- rerender",(new Date).getSeconds()),this.photoChanged=t.photoUploaded!==this.props.photoUploaded,this.photoChanged&&console.log("photo changed - rerender",(new Date).getSeconds()),this.statusChanged=t.status!==this.props.status,this.statusChanged&&console.log("status changed- rerender",(new Date).getSeconds()),this.userInfoChanged=!Q.isEqual(t.current_visited_user,this.props.current_visited_user),this.userInfoChanged&&console.log("userInfo changed",(new Date).getSeconds()),this.authChanged=t.is_auth!==this.props.is_auth,this.authChanged&&console.log("auth changed- rerender",(new Date).getSeconds()),this.urlChanged||this.statusChanged||this.userInfoChanged||this.authChanged||this.photoChanged||this.props.is_fetching!==t.is_fetching}},{key:"componentDidUpdate",value:function(){(this.urlChanged||this.authChanged||this.userInfoChanged||this.photoChanged)&&(this.initProfile(),this.urlChanged&&(this.urlChanged=!this.urlChanged),this.authChanged&&(this.authChanged=!this.authChanged),this.userInfoChanged&&(this.userInfoChanged=!this.userInfoChanged),this.photoChanged&&(this.photoChanged=!this.photoChanged,this.props.toggleIsPhotoUploaded(!1)))}},{key:"initProfile",value:function(){var t=this.props.match.params.userId;if(t){if(this.ownProfile=!1,this.props.current_route==="/profile/".concat(t))return;this.props.setCurrentRoute("/profile/".concat(t)),this.props.getUserData(t,this.props.is_fetching)}else"/profile"!==this.props.current_route&&this.props.setCurrentRoute("/profile"),console.log("ProfileContainer calls - getUserData",(new Date).getSeconds()),this.props.getUserData(this.props.user_id,this.props.is_fetching),this.ownProfile=!0}},{key:"render",value:function(){return this.ownProfile&&!this.props.is_auth?Object(r.jsx)(et.a,{to:"/login"}):Object(r.jsx)(G,Object(a.a)(Object(a.a)({},this.props),{},{ownProfile:this.ownProfile,icons:this.icons}))}}]),o}(l.Component),at=q.a.setCurrentRoute,st=b.c.toggleIsPhotoUploaded;e.default=Object(H.d)(z.a,Object(d.b)((function(t){return{current_visited_user:Object(j.f)(t),is_fetching:Object(j.k)(t),status:Object(j.g)(t),user_id:Object(j.d)(t),current_route:Object(j.b)(t),is_auth:Object(j.j)(t),photoUploaded:Object(j.l)(t)}}),{getUserData:b.b,updateStatus:b.e,setCurrentRoute:at,savePhoto:b.d,toggleIsPhotoUploaded:st}))(ot)}}]);
//# sourceMappingURL=3.55f031dd.chunk.js.map